<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.98" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"http","image":[""],"dateModified":"2024-04-08T04:01:15.000Z","author":[{"@type":"Person","name":"yzqdev","url":"http://www.yzqdev.top"}]}</script><meta property="og:url" content="https://yzqdev.github.io/cs-guide/cs-guide/node-tutor/apis/http.html"><meta property="og:site_name" content="cs-guide"><meta property="og:title" content="http"><meta property="og:description" content="http åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ æˆ–è€… æŸ¥è¯¢å­—ç¬¦ä¸² æ‹†åˆ†æŸ¥è¯¢å­—ç¬¦ä¸² æ¨¡æ‹ŸåŠ è½½å¾ˆæ…¢çš„è¯·æ±‚ å»¶è¿Ÿè¾“å‡ºå›¾ç‰‡ å®ç°æ¥å£çš„ä¸­è½¬ä»£ç† NodeJSæœ¬æ¥çš„ç”¨é€”æ˜¯ç¼–å†™é«˜æ€§èƒ½WebæœåŠ¡å™¨ã€‚æˆ‘ä»¬é¦–å…ˆåœ¨è¿™é‡Œé‡å¤ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£é‡Œçš„ä¾‹å­ï¼Œä½¿ç”¨NodeJSå†…ç½®çš„httpæ¨¡å—ç®€å•å®ç°ä¸€ä¸ªHTTPæœåŠ¡å™¨ã€‚ ä»¥ä¸Šç¨‹åºåˆ›å»ºäº†ä¸€ä¸ªHTTPæœåŠ¡å™¨å¹¶ç›‘å¬8124ç«¯å£ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—®è¯¥ç«¯å£http://1..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-04-08T04:01:15.000Z"><meta property="article:modified_time" content="2024-04-08T04:01:15.000Z"><link rel="icon" href="/cs-guide/images/cs-guide.webp"><meta name="referrer" content="no-referrer"><meta name="mobile-web-app-capable" content="yes"><meta name="theme-color" content="#46bd87"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="manifest" href="/cs-guide/manifest.webmanifest" crossorigin="use-credentials"><link rel="apple-touch-icon" href="/cs-guide/assets/icon/apple-icon-152.png"><title>http | cs-guide</title><meta name="description" content="http åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ æˆ–è€… æŸ¥è¯¢å­—ç¬¦ä¸² æ‹†åˆ†æŸ¥è¯¢å­—ç¬¦ä¸² æ¨¡æ‹ŸåŠ è½½å¾ˆæ…¢çš„è¯·æ±‚ å»¶è¿Ÿè¾“å‡ºå›¾ç‰‡ å®ç°æ¥å£çš„ä¸­è½¬ä»£ç† NodeJSæœ¬æ¥çš„ç”¨é€”æ˜¯ç¼–å†™é«˜æ€§èƒ½WebæœåŠ¡å™¨ã€‚æˆ‘ä»¬é¦–å…ˆåœ¨è¿™é‡Œé‡å¤ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£é‡Œçš„ä¾‹å­ï¼Œä½¿ç”¨NodeJSå†…ç½®çš„httpæ¨¡å—ç®€å•å®ç°ä¸€ä¸ªHTTPæœåŠ¡å™¨ã€‚ ä»¥ä¸Šç¨‹åºåˆ›å»ºäº†ä¸€ä¸ªHTTPæœåŠ¡å™¨å¹¶ç›‘å¬8124ç«¯å£ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—®è¯¥ç«¯å£http://1...">
    <link rel="preload" href="/cs-guide/assets/style-DoR5BGWI.css" as="style"><link rel="stylesheet" href="/cs-guide/assets/style-DoR5BGWI.css">
    <link rel="modulepreload" href="/cs-guide/assets/app-B6vXTniy.js"><link rel="modulepreload" href="/cs-guide/assets/http.html-CwlLd9NA.js">
    
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/cs-guide/" aria-label="å¸¦æˆ‘å›å®¶"><img class="vp-nav-logo" src="/cs-guide/ayaka.webp" alt><!----><span class="vp-site-name hide-in-pad">cs-guide</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/cs-guide/frontend/" aria-label="å‰ç«¯æ•™ç¨‹"><!--[--><iconify-icon class="vp-icon" icon="vscode-icons:file-type-html" sizing="height" height="1em"></iconify-icon><!--]-->å‰ç«¯æ•™ç¨‹<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link route-link-active auto-link" href="/cs-guide/node-tutor/" aria-label="nodeæ•™ç¨‹"><!--[--><iconify-icon class="vp-icon" icon="vscode-icons:file-type-node" sizing="height" height="1em"></iconify-icon><!--]-->nodeæ•™ç¨‹<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/cs-guide/go-tutor/" aria-label="goæ•™ç¨‹"><!--[--><iconify-icon class="vp-icon" icon="vscode-icons:file-type-go" sizing="height" height="1em"></iconify-icon><!--]-->goæ•™ç¨‹<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/cs-guide/java-tutor/" aria-label="javaæ•™ç¨‹"><!--[--><iconify-icon class="vp-icon" icon="vscode-icons:file-type-java" sizing="height" height="1em"></iconify-icon><!--]-->javaæ•™ç¨‹<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="ç³»ç»Ÿæ•™ç¨‹"><!--[--><iconify-icon class="vp-icon" icon="logos:linux-tux" sizing="height" height="1em"></iconify-icon>ç³»ç»Ÿæ•™ç¨‹<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cs-guide/linux-tutor/" aria-label="linux"><!--[--><iconify-icon class="vp-icon" icon="logos:linux-tux" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->linux<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cs-guide/windows-tutor/" aria-label="windows"><!--[--><iconify-icon class="vp-icon" icon="logos:microsoft-windows-icon" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->windows<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cs-guide/git-tutor/" aria-label="gitæ•™ç¨‹"><!--[--><iconify-icon class="vp-icon" icon="vscode-icons:file-type-git" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->gitæ•™ç¨‹<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/cs-guide/python-tutor/" aria-label="pythonæ•™ç¨‹"><!--[--><iconify-icon class="vp-icon" icon="vscode-icons:file-type-python" sizing="height" height="1em"></iconify-icon><!--]-->pythonæ•™ç¨‹<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/cs-guide/csharp-tutor/" aria-label="c#æ•™ç¨‹"><!--[--><iconify-icon class="vp-icon" icon="vscode-icons:file-type-csharp" sizing="height" height="1em"></iconify-icon><!--]-->c#æ•™ç¨‹<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å®‰å“"><!--[--><iconify-icon class="vp-icon" icon="devicon:android" sizing="height" height="1em"></iconify-icon>å®‰å“<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cs-guide/android-tutor/" aria-label="å®‰å“åŸºç¡€"><!--[--><iconify-icon class="vp-icon" icon="ph:android-logo-bold" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->å®‰å“åŸºç¡€<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cs-guide/android-tips/" aria-label="å®‰å“tips"><!--[--><iconify-icon class="vp-icon" icon="mdi:robot-excited-outline" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->å®‰å“tips<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cs-guide/flutter-tutor/" aria-label="flutter"><!--[--><iconify-icon class="vp-icon" icon="vscode-icons:file-type-flutter" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->flutter<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/cs-guide/kotlin-tutor/" aria-label="kotlin"><!--[--><iconify-icon class="vp-icon" icon="logos:kotlin-icon" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->kotlin<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/cs-guide/cs-tips/" aria-label="æŠ€å·§"><!--[--><iconify-icon class="vp-icon" icon="emojione:fire" sizing="height" height="1em"></iconify-icon><!--]-->æŠ€å·§<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="å…¶ä»–"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:event-note" sizing="height" height="1em"></iconify-icon>å…¶ä»–<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://yzqbooks.github.io/think-in-java/" aria-label="javaç¼–ç¨‹æ€æƒ³" rel="noopener noreferrer" target="_blank"><!--[--><iconify-icon class="vp-icon" icon="fa6-brands:java" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->javaç¼–ç¨‹æ€æƒ³<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://yzqdev.github.io/git-tutor" aria-label="gitæ•™ç¨‹" rel="noopener noreferrer" target="_blank"><!--[--><iconify-icon class="vp-icon" icon="bi:git" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->gitæ•™ç¨‹<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://yzqdev.github.io/node-docs" aria-label="nodeæ•™ç¨‹" rel="noopener noreferrer" target="_blank"><!--[--><iconify-icon class="vp-icon" icon="tabler:brand-nodejs" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->nodeæ•™ç¨‹<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://yzqdev.github.io/html-tutor" aria-label="cssæ•™ç¨‹" rel="noopener noreferrer" target="_blank"><!--[--><iconify-icon class="vp-icon" icon="ion:logo-css3" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->cssæ•™ç¨‹<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://yzqbooks.github.io/wangdoc" aria-label="wandoc" rel="noopener noreferrer" target="_blank"><!--[--><iconify-icon class="vp-icon" icon="material-symbols:chrome-reader-mode" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->wandoc<!----></a></li><li class="vp-dropdown-item"><a class="auto-link external-link" href="https://yzqdev.github.io/cg-tutor" aria-label="cgæ•™ç¨‹" rel="noopener noreferrer" target="_blank"><!--[--><iconify-icon class="vp-icon" icon="mdi:blender-software" sizing="both" width="1em" height="1em"></iconify-icon><!--]-->cgæ•™ç¨‹<!----></a></li></ul></button></div></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><div class="vp-nav-item vp-action"><a class="vp-action-link" href="https://github.com/yzqdev/cs-guide" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" name="github" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><div id="docsearch-container" style="display:none;"></div><div><button type="button" aria-label="æœç´¢æ–‡æ¡£" aria-keyshortcuts="Control+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true" class="DocSearch-Search-Icon"><circle cx="11" cy="11" r="8" stroke="currentColor" fill="none" stroke-width="1.4"></circle><path d="m21 21-4.3-4.3" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key DocSearch-Button-Key--ctrl">Ctrl</kbd><kbd class="DocSearch-Button-Key DocSearch-Button-Key--pressed">K</kbd></span></button></div><!--]--><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/cs-guide/node-tutor/" aria-label="nodeæ•™ç¨‹"><!---->nodeæ•™ç¨‹<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">nestjsæ•™ç¨‹</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><!----><span class="vp-sidebar-title">node api</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link auto-link vp-sidebar-link" href="/cs-guide/node-tutor/apis/" aria-label="node api"><!---->node api<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/cs-guide/node-tutor/apis/buffer.html" aria-label="Buffer"><!---->Buffer<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/cs-guide/node-tutor/apis/child_process.html" aria-label="child_process"><!---->child_process<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/cs-guide/node-tutor/apis/crypto.html" aria-label="crypto"><!---->crypto<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/cs-guide/node-tutor/apis/event.html" aria-label="events"><!---->events<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/cs-guide/node-tutor/apis/file.html" aria-label="file"><!---->file<!----></a></li><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/cs-guide/node-tutor/apis/http.html" aria-label="http"><!---->http<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/cs-guide/node-tutor/apis/os.html" aria-label="os"><!---->os<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/cs-guide/node-tutor/apis/path.html" aria-label="path"><!---->path<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/cs-guide/node-tutor/apis/process.html" aria-label="process å¯¹è±¡"><!---->process å¯¹è±¡<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/cs-guide/node-tutor/apis/steam.html" aria-label="æµ"><!---->æµ<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">nodejs</span><span class="vp-arrow end"></span></button><!----></section></li><li><a class="route-link auto-link vp-sidebar-link" href="/cs-guide/node-tutor/node-cli.html" aria-label="nodejså‘½ä»¤è¡Œç¼–å†™"><!---->nodejså‘½ä»¤è¡Œç¼–å†™<!----></a></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">ä»£ç ç‰‡æ®µ</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><!----><span class="vp-sidebar-title">æ„å»ºç³»ç»Ÿ</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!---->http</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="http://www.yzqdev.top" target="_blank" rel="noopener noreferrer">yzqdev</a></span><span property="author" content="yzqdev"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2023/6/25</span><meta property="datePublished" content="2023-06-25T05:00:38.000Z"></span><!----><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 11 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT11M"></span></div><hr></div><!----><div class="" vp-content><!----><div id="markdown-content"><h1 id="http" tabindex="-1"><a class="header-anchor" href="#http"><span>http</span></a></h1><h2 id="åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨" tabindex="-1"><a class="header-anchor" href="#åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨"><span>åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨</span></a></h2><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> http <span class="token keyword">from</span> <span class="token string">&#39;http&#39;</span></span>
<span class="line">http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;Hello xkd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>æˆ–è€…</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> http <span class="token keyword">from</span> <span class="token string">&#39;http&#39;</span></span>
<span class="line"><span class="token keyword">let</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">http<span class="token punctuation">.</span>Server</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">server<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;request&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token punctuation">{</span>        </span>
<span class="line">      <span class="token string-property property">&quot;content-type&quot;</span><span class="token operator">:</span><span class="token string">&quot;text/plain; charset=utf-8&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;xkd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8888</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><h2 id="æŸ¥è¯¢å­—ç¬¦ä¸²" tabindex="-1"><a class="header-anchor" href="#æŸ¥è¯¢å­—ç¬¦ä¸²"><span>æŸ¥è¯¢å­—ç¬¦ä¸²</span></a></h2><p>æ‹†åˆ†æŸ¥è¯¢å­—ç¬¦ä¸²</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/html; charset=utf-8&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">let</span> q <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span>query<span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">let</span> txt <span class="token operator">=</span> q<span class="token punctuation">.</span>year <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> q<span class="token punctuation">.</span>month<span class="token punctuation">;</span></span>
<span class="line">  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><h2 id="æ¨¡æ‹ŸåŠ è½½å¾ˆæ…¢çš„è¯·æ±‚" tabindex="-1"><a class="header-anchor" href="#æ¨¡æ‹ŸåŠ è½½å¾ˆæ…¢çš„è¯·æ±‚"><span>æ¨¡æ‹ŸåŠ è½½å¾ˆæ…¢çš„è¯·æ±‚</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">http</span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> index <span class="token operator">=</span> req<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;?&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> query <span class="token operator">=</span> req<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">const</span> ss <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">const</span> timeout <span class="token operator">=</span> ss<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;timeout&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">const</span> type <span class="token operator">=</span> ss<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;type&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>timeout <span class="token operator">&amp;&amp;</span> <span class="token function">Number</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&#39;json&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/json&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">            res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">&#39;hello world&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&#39;image&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token comment">// è¾“å‡ºæœ¬åœ°ä¸€ä¸ªå›¾ç‰‡</span></span>
<span class="line">          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">delay </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>timeout<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ms response</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          <span class="token punctuation">}</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span>timeout<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;hello world!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> ip<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å»¶è¿Ÿè¾“å‡ºå›¾ç‰‡</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> stream <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&#39;./img/s.jpg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> responseData <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//å­˜å‚¨æ–‡ä»¶æµ</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span>stream<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token comment">//åˆ¤æ–­çŠ¶æ€</span></span>
<span class="line">  stream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    responseData<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  stream<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> finalData <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>responseData<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// response.write();</span></span>
<span class="line">    res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;image/jpg&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>finalData<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h2 id="å®ç°æ¥å£çš„ä¸­è½¬ä»£ç†" tabindex="-1"><a class="header-anchor" href="#å®ç°æ¥å£çš„ä¸­è½¬ä»£ç†"><span>å®ç°æ¥å£çš„ä¸­è½¬ä»£ç†</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> </span>
<span class="line"></span>
<span class="line"><span class="token keyword">const</span> ip <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">IP</span> <span class="token operator">||</span> <span class="token string">&#39;127.0.0.1&#39;</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span> <span class="token operator">||</span> <span class="token number">3001</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">http</span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">const</span> allowList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;joke.qq.com&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;www.qq.com&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>req<span class="token punctuation">.</span>headers <span class="token operator">||</span> <span class="token operator">!</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>referer <span class="token operator">||</span> allow<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      res<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">403</span><span class="token punctuation">,</span> <span class="token string">&#39;forbidden&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;403 forbidden&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">return</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å‘èµ·è¯·æ±‚&#39;</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    https</span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;https://www.v2ex.com/api/topics/latest.json&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span></span>
<span class="line">        response<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          data <span class="token operator">+=</span> chunk<span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        response<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">          res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Access-Control-Allow-Origin&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>referer <span class="token operator">||</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\/$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Access-Control-Allow-Methods&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;GET, POST&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Access-Control-Allow-Headers&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;X-Requested-With,content-type&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">          res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">è¯·æ±‚é‡åˆ°é—®é¢˜: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>e<span class="token punctuation">.</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> ip<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">server has started at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ip<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>NodeJSæœ¬æ¥çš„ç”¨é€”æ˜¯ç¼–å†™é«˜æ€§èƒ½WebæœåŠ¡å™¨ã€‚æˆ‘ä»¬é¦–å…ˆåœ¨è¿™é‡Œé‡å¤ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£é‡Œçš„ä¾‹å­ï¼Œä½¿ç”¨NodeJSå†…ç½®çš„<code>http</code>æ¨¡å—ç®€å•å®ç°ä¸€ä¸ªHTTPæœåŠ¡å™¨ã€‚</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> http <span class="token keyword">from</span> <span class="token string">&#39;http&#39;</span></span>
<span class="line"></span>
<span class="line"> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  response<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text-plain&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;Hello World\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">8124</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>ä»¥ä¸Šç¨‹åºåˆ›å»ºäº†ä¸€ä¸ªHTTPæœåŠ¡å™¨å¹¶ç›‘å¬<code>8124</code>ç«¯å£ï¼Œæ‰“å¼€æµè§ˆå™¨è®¿é—®è¯¥ç«¯å£<code>http://127.0.0.1:8124/</code>å°±èƒ½å¤Ÿçœ‹åˆ°æ•ˆæœã€‚</p><blockquote><p>åœ¨Linuxç³»ç»Ÿä¸‹ï¼Œç›‘å¬1024ä»¥ä¸‹ç«¯å£éœ€è¦rootæƒé™ã€‚å› æ­¤ï¼Œå¦‚æœæƒ³ç›‘å¬80æˆ–443ç«¯å£çš„è¯ï¼Œéœ€è¦ä½¿ç”¨<code>sudo</code>å‘½ä»¤å¯åŠ¨ç¨‹åºã€‚</p></blockquote><h2 id="apièµ°é©¬è§‚èŠ±" tabindex="-1"><a class="header-anchor" href="#apièµ°é©¬è§‚èŠ±"><span>APIèµ°é©¬è§‚èŠ±</span></a></h2><p>æˆ‘ä»¬å…ˆå¤§è‡´çœ‹çœ‹NodeJSæä¾›äº†å“ªäº›å’Œç½‘ç»œæ“ä½œæœ‰å…³çš„APIã€‚è¿™é‡Œå¹¶ä¸é€ä¸€ä»‹ç»æ¯ä¸ªAPIçš„ä½¿ç”¨æ–¹æ³•ï¼Œå®˜æ–¹æ–‡æ¡£å·²ç»åšå¾—å¾ˆå¥½äº†ã€‚</p><h3 id="http-1" tabindex="-1"><a class="header-anchor" href="#http-1"><span>HTTP</span></a></h3><blockquote><p><strong>å®˜æ–¹æ–‡æ¡£ï¼š</strong> <a href="http://nodejs.org/api/http.html" target="_blank" rel="noopener noreferrer">http://nodejs.org/api/http.html</a></p></blockquote><p>&#39;http&#39;æ¨¡å—æä¾›ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p><ul><li><p>ä½œä¸ºæœåŠ¡ç«¯ä½¿ç”¨æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªHTTPæœåŠ¡å™¨ï¼Œç›‘å¬HTTPå®¢æˆ·ç«¯è¯·æ±‚å¹¶è¿”å›å“åº”ã€‚</p></li><li><p>ä½œä¸ºå®¢æˆ·ç«¯ä½¿ç”¨æ—¶ï¼Œå‘èµ·ä¸€ä¸ªHTTPå®¢æˆ·ç«¯è¯·æ±‚ï¼Œè·å–æœåŠ¡ç«¯å“åº”ã€‚</p></li></ul><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹æœåŠ¡ç«¯æ¨¡å¼ä¸‹å¦‚ä½•å·¥ä½œã€‚å¦‚å¼€é—¨çº¢ä¸­çš„ä¾‹å­æ‰€ç¤ºï¼Œé¦–å…ˆéœ€è¦ä½¿ç”¨<code>.createServer</code>æ–¹æ³•åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼Œç„¶åè°ƒç”¨<code>.listen</code>æ–¹æ³•ç›‘å¬ç«¯å£ã€‚ä¹‹åï¼Œæ¯å½“æ¥äº†ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚ï¼Œåˆ›å»ºæœåŠ¡å™¨æ—¶ä¼ å…¥çš„å›è°ƒå‡½æ•°å°±è¢«è°ƒç”¨ä¸€æ¬¡ã€‚å¯ä»¥çœ‹å‡ºï¼Œè¿™æ˜¯ä¸€ç§äº‹ä»¶æœºåˆ¶ã€‚</p><p>HTTPè¯·æ±‚æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ•°æ®æµï¼Œç”±è¯·æ±‚å¤´ï¼ˆheadersï¼‰å’Œè¯·æ±‚ä½“ï¼ˆbodyï¼‰ç»„æˆã€‚ä¾‹å¦‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„HTTPè¯·æ±‚æ•°æ®å†…å®¹ã€‚</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> <span class="token constant">POST</span> <span class="token operator">/</span> <span class="token constant">HTTP</span><span class="token operator">/</span><span class="token number">1.1</span></span>
<span class="line"> User<span class="token operator">-</span>Agent<span class="token operator">:</span> curl<span class="token operator">/</span><span class="token number">7.26</span><span class="token number">.0</span></span>
<span class="line"> <span class="token literal-property property">Host</span><span class="token operator">:</span> localhost</span>
<span class="line"> <span class="token literal-property property">Accept</span><span class="token operator">:</span> <span class="token operator">*</span><span class="token comment">/*</span>
<span class="line"> Content-Length: 11</span>
<span class="line"> Content-Type: application/x-www-form-urlencoded</span>
<span class="line"></span>
<span class="line"> Hello World</span>
<span class="line"></span></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œç©ºè¡Œä¹‹ä¸Šæ˜¯è¯·æ±‚å¤´ï¼Œä¹‹ä¸‹æ˜¯è¯·æ±‚ä½“ã€‚HTTPè¯·æ±‚åœ¨å‘é€ç»™æœåŠ¡å™¨æ—¶ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯æŒ‰ç…§ä»å¤´åˆ°å°¾çš„é¡ºåºä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚åœ°ä»¥æ•°æ®æµæ–¹å¼å‘é€çš„ã€‚è€Œ<code>http</code>æ¨¡å—åˆ›å»ºçš„HTTPæœåŠ¡å™¨åœ¨æ¥æ”¶åˆ°å®Œæ•´çš„è¯·æ±‚å¤´åï¼Œå°±ä¼šè°ƒç”¨å›è°ƒå‡½æ•°ã€‚åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œé™¤äº†å¯ä»¥ä½¿ç”¨<code>request</code>å¯¹è±¡è®¿é—®è¯·æ±‚å¤´æ•°æ®å¤–ï¼Œè¿˜èƒ½æŠŠ<code>request</code>å¯¹è±¡å½“ä½œä¸€ä¸ªåªè¯»æ•°æ®æµæ¥è®¿é—®è¯·æ±‚ä½“æ•°æ®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> body <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  request<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   body<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  request<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   body <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></span>
<span class="line"> <span class="token constant">POST</span></span>
<span class="line"> <span class="token punctuation">{</span> <span class="token string-property property">&#39;user-agent&#39;</span><span class="token operator">:</span> <span class="token string">&#39;curl/7.26.0&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">accept</span><span class="token operator">:</span> <span class="token string">&#39;*/*&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token string-property property">&#39;content-length&#39;</span><span class="token operator">:</span> <span class="token string">&#39;11&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token string-property property">&#39;content-type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/x-www-form-urlencoded&#39;</span> <span class="token punctuation">}</span></span>
<span class="line"> Hello World</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>HTTPå“åº”æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªæ•°æ®æµï¼ŒåŒæ ·ç”±å“åº”å¤´ï¼ˆheadersï¼‰å’Œå“åº”ä½“ï¼ˆbodyï¼‰ç»„æˆã€‚ä¾‹å¦‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„HTTPè¯·æ±‚æ•°æ®å†…å®¹ã€‚</p><p>HTTP/1.1 200 OK Content-Type: text/plain Content-Length: 11 Date: Tue, 05 Nov 2013 05:31:38 GMT Connection: keep-alive</p><p>Hello World</p><p>åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œé™¤äº†å¯ä»¥ä½¿ç”¨<code>response</code>å¯¹è±¡æ¥å†™å…¥å“åº”å¤´æ•°æ®å¤–ï¼Œè¿˜èƒ½æŠŠ<code>response</code>å¯¹è±¡å½“ä½œä¸€ä¸ªåªå†™æ•°æ®æµæ¥å†™å…¥å“åº”ä½“æ•°æ®ã€‚ä¾‹å¦‚åœ¨ä»¥ä¸‹ä¾‹å­ä¸­ï¼ŒæœåŠ¡ç«¯åŸæ ·å°†å®¢æˆ·ç«¯è¯·æ±‚çš„è¯·æ±‚ä½“æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  response<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/plain&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  request<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   response<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  request<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å®¢æˆ·ç«¯æ¨¡å¼ä¸‹å¦‚ä½•å·¥ä½œã€‚ä¸ºäº†å‘èµ·ä¸€ä¸ªå®¢æˆ·ç«¯HTTPè¯·æ±‚ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šç›®æ ‡æœåŠ¡å™¨çš„ä½ç½®å¹¶å‘é€è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ï¼Œä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†å…·ä½“åšæ³•ã€‚</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">&#39;www.example.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/upload&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/x-www-form-urlencoded&#39;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> <span class="token keyword">let</span> request <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> request<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> request<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>.request</code>æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå¹¶æŒ‡å®šè¯·æ±‚ç›®æ ‡å’Œè¯·æ±‚å¤´æ•°æ®ã€‚ä¹‹åï¼Œå°±å¯ä»¥æŠŠ<code>request</code>å¯¹è±¡å½“ä½œä¸€ä¸ªåªå†™æ•°æ®æµæ¥å†™å…¥è¯·æ±‚ä½“æ•°æ®å’Œç»“æŸè¯·æ±‚ã€‚å¦å¤–ï¼Œç”±äºHTTPè¯·æ±‚ä¸­<code>GET</code>è¯·æ±‚æ˜¯æœ€å¸¸è§çš„ä¸€ç§ï¼Œå¹¶ä¸”ä¸éœ€è¦è¯·æ±‚ä½“ï¼Œå› æ­¤<code>http</code>æ¨¡å—ä¹Ÿæä¾›äº†ä»¥ä¸‹ä¾¿æ·APIã€‚</p><p>http.get(&#39;http://www.example.com/&#39;, function (response) {});</p><p>å½“å®¢æˆ·ç«¯å‘é€è¯·æ±‚å¹¶æ¥æ”¶åˆ°å®Œæ•´çš„æœåŠ¡ç«¯å“åº”å¤´æ—¶ï¼Œå°±ä¼šè°ƒç”¨å›è°ƒå‡½æ•°ã€‚åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œé™¤äº†å¯ä»¥ä½¿ç”¨<code>response</code>å¯¹è±¡è®¿é—®å“åº”å¤´æ•°æ®å¤–ï¼Œè¿˜èƒ½æŠŠ<code>response</code>å¯¹è±¡å½“ä½œä¸€ä¸ªåªè¯»æ•°æ®æµæ¥è®¿é—®å“åº”ä½“æ•°æ®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> http<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;http://www.example.com/&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> body <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>statusCode<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  response<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   body<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  response<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   body <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>body<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></span>
<span class="line"> <span class="token number">200</span></span>
<span class="line"> <span class="token punctuation">{</span> <span class="token string-property property">&#39;content-type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/html&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token string">&#39;Apache&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token string-property property">&#39;content-length&#39;</span><span class="token operator">:</span> <span class="token string">&#39;801&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">date</span><span class="token operator">:</span> <span class="token string">&#39;Tue, 05 Nov 2013 06:08:41 GMT&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">connection</span><span class="token operator">:</span> <span class="token string">&#39;keep-alive&#39;</span> <span class="token punctuation">}</span></span>
<span class="line"> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span></span>
<span class="line"> <span class="token operator">...</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="https" tabindex="-1"><a class="header-anchor" href="#https"><span>HTTPS</span></a></h3><blockquote><p><strong>å®˜æ–¹æ–‡æ¡£ï¼š</strong> <a href="http://nodejs.org/api/https.html" target="_blank" rel="noopener noreferrer">http://nodejs.org/api/https.html</a></p></blockquote><p><code>https</code>æ¨¡å—ä¸<code>http</code>æ¨¡å—æä¸ºç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äº<code>https</code>æ¨¡å—éœ€è¦é¢å¤–å¤„ç†SSLè¯ä¹¦ã€‚</p><p>åœ¨æœåŠ¡ç«¯æ¨¡å¼ä¸‹ï¼Œåˆ›å»ºä¸€ä¸ªHTTPSæœåŠ¡å™¨çš„ç¤ºä¾‹å¦‚ä¸‹ã€‚</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token literal-property property">key</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;./ssl/default.key&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">cert</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;./ssl/default.cer&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> <span class="token keyword">let</span> server <span class="token operator">=</span> https<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token comment">// ...</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸åˆ›å»ºHTTPæœåŠ¡å™¨ç›¸æ¯”ï¼Œå¤šäº†ä¸€ä¸ª<code>options</code>å¯¹è±¡ï¼Œé€šè¿‡<code>key</code>å’Œ<code>cert</code>å­—æ®µæŒ‡å®šäº†HTTPSæœåŠ¡å™¨ä½¿ç”¨çš„ç§é’¥å’Œå…¬é’¥ã€‚</p><p>å¦å¤–ï¼ŒNodeJSæ”¯æŒSNIæŠ€æœ¯ï¼Œå¯ä»¥æ ¹æ®HTTPSå®¢æˆ·ç«¯è¯·æ±‚ä½¿ç”¨çš„åŸŸååŠ¨æ€ä½¿ç”¨ä¸åŒçš„è¯ä¹¦ï¼Œå› æ­¤åŒä¸€ä¸ªHTTPSæœåŠ¡å™¨å¯ä»¥ä½¿ç”¨å¤šä¸ªåŸŸåæä¾›æœåŠ¡ã€‚æ¥ç€ä¸Šä¾‹ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¸ºHTTPSæœåŠ¡å™¨æ·»åŠ å¤šç»„è¯ä¹¦ã€‚</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> server<span class="token punctuation">.</span><span class="token function">addContext</span><span class="token punctuation">(</span><span class="token string">&#39;foo.com&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">key</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;./ssl/foo.com.key&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">cert</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;./ssl/foo.com.cer&#39;</span><span class="token punctuation">)</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> server<span class="token punctuation">.</span><span class="token function">addContext</span><span class="token punctuation">(</span><span class="token string">&#39;bar.com&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">key</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;./ssl/bar.com.key&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">cert</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">&#39;./ssl/bar.com.cer&#39;</span><span class="token punctuation">)</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>åœ¨å®¢æˆ·ç«¯æ¨¡å¼ä¸‹ï¼Œå‘èµ·ä¸€ä¸ªHTTPSå®¢æˆ·ç«¯è¯·æ±‚ä¸<code>http</code>æ¨¡å—å‡ ä¹ç›¸åŒï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">&#39;www.example.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">443</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;GET&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> <span class="token keyword">let</span> request <span class="token operator">=</span> https<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> request<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>ä½†å¦‚æœç›®æ ‡æœåŠ¡å™¨ä½¿ç”¨çš„SSLè¯ä¹¦æ˜¯è‡ªåˆ¶çš„ï¼Œä¸æ˜¯ä»é¢å‘æœºæ„è´­ä¹°çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹<code>https</code>æ¨¡å—ä¼šæ‹’ç»è¿æ¥ï¼Œæç¤ºè¯´æœ‰è¯ä¹¦å®‰å…¨é—®é¢˜ã€‚åœ¨<code>options</code>é‡ŒåŠ å…¥<code>rejectUnauthorized: false</code>å­—æ®µå¯ä»¥ç¦ç”¨å¯¹è¯ä¹¦æœ‰æ•ˆæ€§çš„æ£€æŸ¥ï¼Œä»è€Œå…è®¸<code>https</code>æ¨¡å—è¯·æ±‚å¼€å‘ç¯å¢ƒä¸‹ä½¿ç”¨è‡ªåˆ¶è¯ä¹¦çš„HTTPSæœåŠ¡å™¨ã€‚</p><h3 id="url" tabindex="-1"><a class="header-anchor" href="#url"><span>URL</span></a></h3><blockquote><p><strong>å®˜æ–¹æ–‡æ¡£ï¼š</strong> <a href="http://nodejs.org/api/url.html" target="_blank" rel="noopener noreferrer">http://nodejs.org/api/url.html</a></p></blockquote><p>å¤„ç†HTTPè¯·æ±‚æ—¶<code>url</code>æ¨¡å—ä½¿ç”¨ç‡è¶…é«˜ï¼Œå› ä¸ºè¯¥æ¨¡å—å…è®¸è§£æURLã€ç”ŸæˆURLï¼Œä»¥åŠæ‹¼æ¥URLã€‚é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªå®Œæ•´çš„URLçš„å„ç»„æˆéƒ¨åˆ†ã€‚</p><div class="language-text" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">                            href</span>
<span class="line">  -----------------------------------------------------------------</span>
<span class="line">                             host              path</span>
<span class="line">                       --------------- ----------------------------</span>
<span class="line">  http: // user:pass @ host.com : 8080 /p/a/t/h ?query=string #hash</span>
<span class="line">  -----    ---------   --------   ---- -------- ------------- -----</span>
<span class="line"> protocol     auth     hostname   port pathname     search     hash</span>
<span class="line">                                                 ------------</span>
<span class="line">                                                    query</span>
<span class="line"></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>.parse</code>æ–¹æ³•æ¥å°†ä¸€ä¸ªURLå­—ç¬¦ä¸²è½¬æ¢ä¸ºURLå¯¹è±¡ï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&#39;http://user:pass@host.com:8080/p/a/t/h?query=string#hash&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token comment">/*=&gt;</span>
<span class="line"> { protocol: &#39;http:&#39;,</span>
<span class="line">   auth: &#39;user:pass&#39;,</span>
<span class="line">   host: &#39;host.com:8080&#39;,</span>
<span class="line">   port: &#39;8080&#39;,</span>
<span class="line">   hostname: &#39;host.com&#39;,</span>
<span class="line">   hash: &#39;#hash&#39;,</span>
<span class="line">   search: &#39;?query=string&#39;,</span>
<span class="line">   query: &#39;query=string&#39;,</span>
<span class="line">   pathname: &#39;/p/a/t/h&#39;,</span>
<span class="line">   path: &#39;/p/a/t/h?query=string&#39;,</span>
<span class="line">   href: &#39;http://user:pass@host.com:8080/p/a/t/h?query=string#hash&#39; }</span>
<span class="line"> */</span></span>
<span class="line"></span></code></pre></div><p>ä¼ ç»™<code>.parse</code>æ–¹æ³•çš„ä¸ä¸€å®šè¦æ˜¯ä¸€ä¸ªå®Œæ•´çš„URLï¼Œä¾‹å¦‚åœ¨HTTPæœåŠ¡å™¨å›è°ƒå‡½æ•°ä¸­ï¼Œ<code>request.url</code>ä¸åŒ…å«åè®®å¤´å’ŒåŸŸåï¼Œä½†åŒæ ·å¯ä»¥ç”¨<code>.parse</code>æ–¹æ³•è§£æã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> tmp <span class="token operator">=</span> request<span class="token punctuation">.</span>url<span class="token punctuation">;</span> <span class="token comment">// =&gt; &quot;/foo/bar?a=b&quot;</span></span>
<span class="line">  url<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token comment">/*=&gt;</span>
<span class="line">  { protocol: null,</span>
<span class="line">    slashes: null,</span>
<span class="line">    auth: null,</span>
<span class="line">    host: null,</span>
<span class="line">    port: null,</span>
<span class="line">    hostname: null,</span>
<span class="line">    hash: null,</span>
<span class="line">    search: &#39;?a=b&#39;,</span>
<span class="line">    query: &#39;a=b&#39;,</span>
<span class="line">    pathname: &#39;/foo/bar&#39;,</span>
<span class="line">    path: &#39;/foo/bar?a=b&#39;,</span>
<span class="line">    href: &#39;/foo/bar?a=b&#39; }</span>
<span class="line">  */</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>.parse</code>æ–¹æ³•è¿˜æ”¯æŒç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå¸ƒå°”ç±»å‹å¯é€‰å‚æ•°ã€‚ç¬¬äºŒä¸ªå‚æ•°ç­‰äº<code>true</code>æ—¶ï¼Œè¯¥æ–¹æ³•è¿”å›çš„URLå¯¹è±¡ä¸­ï¼Œ<code>query</code>å­—æ®µä¸å†æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ä¸€ä¸ªç»è¿‡<code>querystring</code>æ¨¡å—è½¬æ¢åçš„å‚æ•°å¯¹è±¡ã€‚ç¬¬ä¸‰ä¸ªå‚æ•°ç­‰äº<code>true</code>æ—¶ï¼Œè¯¥æ–¹æ³•å¯ä»¥æ­£ç¡®è§£æä¸å¸¦åè®®å¤´çš„URLï¼Œä¾‹å¦‚<code>//www.example.com/foo/bar</code>ã€‚</p><p>åè¿‡æ¥ï¼Œ<code>format</code>æ–¹æ³•å…è®¸å°†ä¸€ä¸ªURLå¯¹è±¡è½¬æ¢ä¸ºURLå­—ç¬¦ä¸²ï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> url<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&#39;http:&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;www.example.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&#39;/p/a/t/h&#39;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token string">&#39;query=string&#39;</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token comment">/*=&gt;</span>
<span class="line"> &#39;http://www.example.com/p/a/t/h?query=string&#39;</span>
<span class="line"> */</span></span>
<span class="line"></span></code></pre></div><p>å¦å¤–ï¼Œ<code>.resolve</code>æ–¹æ³•å¯ä»¥ç”¨äºæ‹¼æ¥URLï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> url<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;http://www.example.com/foo/bar&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;../baz&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token comment">/*=&gt;</span>
<span class="line"> &lt;http://www.example.com/baz&gt;</span>
<span class="line"> */</span></span>
<span class="line"></span></code></pre></div><h3 id="query-string" tabindex="-1"><a class="header-anchor" href="#query-string"><span>Query String</span></a></h3><blockquote><p><strong>å®˜æ–¹æ–‡æ¡£ï¼š</strong> <a href="http://nodejs.org/api/querystring.html" target="_blank" rel="noopener noreferrer">http://nodejs.org/api/querystring.html</a></p></blockquote><p><code>querystring</code>æ¨¡å—ç”¨äºå®ç°URLå‚æ•°å­—ç¬¦ä¸²ä¸å‚æ•°å¯¹è±¡çš„äº’ç›¸è½¬æ¢ï¼Œç¤ºä¾‹å¦‚ä¸‹ã€‚</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> querystring<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&#39;foo=bar&amp;baz=qux&amp;baz=quux&amp;corge&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token comment">/*=&gt;</span>
<span class="line"> { foo: &#39;bar&#39;, baz: [&#39;qux&#39;, &#39;quux&#39;], corge: &#39;&#39; }</span>
<span class="line"> */</span></span>
<span class="line"></span>
<span class="line"> querystring<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">baz</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;qux&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;quux&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">corge</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token comment">/*=&gt;</span>
<span class="line"> &#39;foo=bar&amp;baz=qux&amp;baz=quux&amp;corge=&#39;</span>
<span class="line"> */</span></span>
<span class="line"></span></code></pre></div><h3 id="zlib" tabindex="-1"><a class="header-anchor" href="#zlib"><span>Zlib</span></a></h3><blockquote><p><strong>å®˜æ–¹æ–‡æ¡£ï¼š</strong> <a href="http://nodejs.org/api/zlib.html" target="_blank" rel="noopener noreferrer">http://nodejs.org/api/zlib.html</a></p></blockquote><p><code>zlib</code>æ¨¡å—æä¾›äº†æ•°æ®å‹ç¼©å’Œè§£å‹çš„åŠŸèƒ½ã€‚å½“æˆ‘ä»¬å¤„ç†HTTPè¯·æ±‚å’Œå“åº”æ—¶ï¼Œå¯èƒ½éœ€è¦ç”¨åˆ°è¿™ä¸ªæ¨¡å—ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸ªä½¿ç”¨<code>zlib</code>æ¨¡å—å‹ç¼©HTTPå“åº”ä½“æ•°æ®çš„ä¾‹å­ã€‚è¿™ä¸ªä¾‹å­ä¸­ï¼Œåˆ¤æ–­äº†å®¢æˆ·ç«¯æ˜¯å¦æ”¯æŒgzipï¼Œå¹¶åœ¨æ”¯æŒçš„æƒ…å†µä¸‹ä½¿ç”¨<code>zlib</code>æ¨¡å—è¿”å›gzipä¹‹åçš„å“åº”ä½“æ•°æ®ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1024</span><span class="token punctuation">,</span></span>
<span class="line">   data <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">while</span> <span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   data <span class="token operator">+=</span> <span class="token string">&#39;.&#39;</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&#39;accept-encoding&#39;</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;gzip&#39;</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   zlib<span class="token punctuation">.</span><span class="token function">gzip</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    response<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">     <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/plain&#39;</span><span class="token punctuation">,</span></span>
<span class="line">     <span class="token string-property property">&#39;Content-Encoding&#39;</span><span class="token operator">:</span> <span class="token string">&#39;gzip&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">   response<span class="token punctuation">.</span><span class="token function">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&#39;Content-Type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;text/plain&#39;</span></span>
<span class="line">   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   response<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¥ç€æˆ‘ä»¬çœ‹ä¸€ä¸ªä½¿ç”¨<code>zlib</code>æ¨¡å—è§£å‹HTTPå“åº”ä½“æ•°æ®çš„ä¾‹å­ã€‚è¿™ä¸ªä¾‹å­ä¸­ï¼Œåˆ¤æ–­äº†æœåŠ¡ç«¯å“åº”æ˜¯å¦ä½¿ç”¨gzipå‹ç¼©ï¼Œå¹¶åœ¨å‹ç¼©çš„æƒ…å†µä¸‹ä½¿ç”¨<code>zlib</code>æ¨¡å—è§£å‹å“åº”ä½“æ•°æ®ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">&#39;www.example.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&#39;Accept-Encoding&#39;</span><span class="token operator">:</span> <span class="token string">&#39;gzip, deflate&#39;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">let</span> body <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  response<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   body<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  response<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;end&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   body <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">   <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">&#39;content-encoding&#39;</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&#39;gzip&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    zlib<span class="token punctuation">.</span><span class="token function">gunzip</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="net" tabindex="-1"><a class="header-anchor" href="#net"><span>Net</span></a></h3><blockquote><p><strong>å®˜æ–¹æ–‡æ¡£ï¼š</strong> <a href="http://nodejs.org/api/net.html" target="_blank" rel="noopener noreferrer">http://nodejs.org/api/net.html</a></p></blockquote><p><code>net</code>æ¨¡å—å¯ç”¨äºåˆ›å»ºSocketæœåŠ¡å™¨æˆ–Socketå®¢æˆ·ç«¯ã€‚ç”±äºSocketåœ¨å‰ç«¯é¢†åŸŸçš„ä½¿ç”¨èŒƒå›´è¿˜ä¸æ˜¯å¾ˆå¹¿ï¼Œè¿™é‡Œå…ˆä¸æ¶‰åŠåˆ°WebSocketçš„ä»‹ç»ï¼Œä»…ä»…ç®€å•æ¼”ç¤ºä¸€ä¸‹å¦‚ä½•ä»Socketå±‚é¢æ¥å®ç°HTTPè¯·æ±‚å’Œå“åº”ã€‚</p><p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä½¿ç”¨Socketæ­å»ºä¸€ä¸ªå¾ˆä¸ä¸¥è°¨çš„HTTPæœåŠ¡å™¨çš„ä¾‹å­ã€‚è¿™ä¸ªHTTPæœåŠ¡å™¨ä¸ç®¡æ”¶åˆ°å•¥è¯·æ±‚ï¼Œéƒ½å›ºå®šè¿”å›ç›¸åŒçš„å“åº”ã€‚</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> net<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">conn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  conn<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   conn<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&#39;HTTP/1.1 200 OK&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;Content-Type: text/plain&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;Content-Length: 11&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;Hello World&#39;</span></span>
<span class="line">   <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>æ¥ç€æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä½¿ç”¨Socketå‘èµ·HTTPå®¢æˆ·ç«¯è¯·æ±‚çš„ä¾‹å­ã€‚è¿™ä¸ªä¾‹å­ä¸­ï¼ŒSocketå®¢æˆ·ç«¯åœ¨å»ºç«‹è¿æ¥åå‘é€äº†ä¸€ä¸ªHTTP GETè¯·æ±‚ï¼Œå¹¶é€šè¿‡<code>data</code>äº‹ä»¶ç›‘å¬å‡½æ•°æ¥è·å–æœåŠ¡å™¨å“åº”ã€‚</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"> <span class="token keyword">let</span> options <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">   <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&#39;www.example.com&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> <span class="token keyword">let</span> client <span class="token operator">=</span> net<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">   client<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">[</span></span>
<span class="line">    <span class="token string">&#39;GET / HTTP/1.1&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;User-Agent: curl/7.26.0&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;Host: www.baidu.com&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;Accept: */*&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token string">&#39;&#39;</span></span>
<span class="line">   <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"> client<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;data&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  client<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="çµæœºä¸€ç‚¹" tabindex="-1"><a class="header-anchor" href="#çµæœºä¸€ç‚¹"><span>çµæœºä¸€ç‚¹</span></a></h2><p>ä½¿ç”¨NodeJSæ“ä½œç½‘ç»œï¼Œç‰¹åˆ«æ˜¯æ“ä½œHTTPè¯·æ±‚å’Œå“åº”æ—¶ä¼šé‡åˆ°ä¸€äº›æƒŠå–œï¼Œè¿™é‡Œå¯¹ä¸€äº›å¸¸è§é—®é¢˜åšè§£ç­”ã€‚</p><ul><li>é—®ï¼š ä¸ºä»€ä¹ˆé€šè¿‡<code>headers</code>å¯¹è±¡è®¿é—®åˆ°çš„HTTPè¯·æ±‚å¤´æˆ–å“åº”å¤´å­—æ®µä¸æ˜¯é©¼å³°çš„ï¼Ÿ</li></ul><p>ç­”ï¼š ä»è§„èŒƒä¸Šè®²ï¼ŒHTTPè¯·æ±‚å¤´å’Œå“åº”å¤´å­—æ®µéƒ½åº”è¯¥æ˜¯é©¼å³°çš„ã€‚ä½†ç°å®æ˜¯æ®‹é…·çš„ï¼Œä¸æ˜¯æ¯ä¸ªHTTPæœåŠ¡ç«¯æˆ–å®¢æˆ·ç«¯ç¨‹åºéƒ½ä¸¥æ ¼éµå¾ªè§„èŒƒï¼Œæ‰€ä»¥NodeJSåœ¨å¤„ç†ä»åˆ«çš„å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯æ”¶åˆ°çš„å¤´å­—æ®µæ—¶ï¼Œéƒ½ç»Ÿä¸€åœ°è½¬æ¢ä¸ºäº†å°å†™å­—æ¯æ ¼å¼ï¼Œä»¥ä¾¿å¼€å‘è€…èƒ½ä½¿ç”¨ç»Ÿä¸€çš„æ–¹å¼æ¥è®¿é—®å¤´å­—æ®µï¼Œä¾‹å¦‚<code>headers[&#39;content-length&#39;]</code>ã€‚</p><ul><li>é—®ï¼š ä¸ºä»€ä¹ˆ<code>http</code>æ¨¡å—åˆ›å»ºçš„HTTPæœåŠ¡å™¨è¿”å›çš„å“åº”æ˜¯<code>chunked</code>ä¼ è¾“æ–¹å¼çš„ï¼Ÿ</li></ul><p>ç­”ï¼š å› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨<code>.writeHead</code>æ–¹æ³•å†™å…¥å“åº”å¤´åï¼Œå…è®¸ä½¿ç”¨<code>.write</code>æ–¹æ³•å†™å…¥ä»»æ„é•¿åº¦çš„å“åº”ä½“æ•°æ®ï¼Œå¹¶ä½¿ç”¨<code>.end</code>æ–¹æ³•ç»“æŸä¸€ä¸ªå“åº”ã€‚ç”±äºå“åº”ä½“æ•°æ®é•¿åº¦ä¸ç¡®å®šï¼Œå› æ­¤NodeJSè‡ªåŠ¨åœ¨å“åº”å¤´é‡Œæ·»åŠ äº†<code>Transfer-Encoding: chunked</code>å­—æ®µï¼Œå¹¶é‡‡ç”¨<code>chunked</code>ä¼ è¾“æ–¹å¼ã€‚ä½†æ˜¯å½“å“åº”ä½“æ•°æ®é•¿åº¦ç¡®å®šæ—¶ï¼Œå¯ä½¿ç”¨<code>.writeHead</code>æ–¹æ³•åœ¨å“åº”å¤´é‡ŒåŠ ä¸Š<code>Content-Length</code>å­—æ®µï¼Œè¿™æ ·åšä¹‹åNodeJSå°±ä¸ä¼šè‡ªåŠ¨æ·»åŠ <code>Transfer-Encoding</code>å­—æ®µå’Œä½¿ç”¨<code>chunked</code>ä¼ è¾“æ–¹å¼ã€‚</p><ul><li>é—®ï¼š ä¸ºä»€ä¹ˆä½¿ç”¨<code>http</code>æ¨¡å—å‘èµ·HTTPå®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œæœ‰æ—¶å€™ä¼šå‘ç”Ÿ<code>socket hang up</code>é”™è¯¯ï¼Ÿ</li></ul><p>ç­”ï¼š å‘èµ·å®¢æˆ·ç«¯HTTPè¯·æ±‚å‰éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªå®¢æˆ·ç«¯ã€‚<code>http</code>æ¨¡å—æä¾›äº†ä¸€ä¸ªå…¨å±€å®¢æˆ·ç«¯<code>http.globalAgent</code>ï¼Œå¯ä»¥è®©æˆ‘ä»¬ä½¿ç”¨<code>.request</code>æˆ–<code>.get</code>æ–¹æ³•æ—¶ä¸ç”¨æ‰‹åŠ¨åˆ›å»ºå®¢æˆ·ç«¯ã€‚ä½†æ˜¯å…¨å±€å®¢æˆ·ç«¯é»˜è®¤åªå…è®¸5ä¸ªå¹¶å‘Socketè¿æ¥ï¼Œå½“æŸä¸€ä¸ªæ—¶åˆ»HTTPå®¢æˆ·ç«¯è¯·æ±‚åˆ›å»ºè¿‡å¤šï¼Œè¶…è¿‡è¿™ä¸ªæ•°å­—æ—¶ï¼Œå°±ä¼šå‘ç”Ÿ<code>socket hang up</code>é”™è¯¯ã€‚è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡<code>http.globalAgent.maxSockets</code>å±æ€§æŠŠè¿™ä¸ªæ•°å­—æ”¹å¤§äº›å³å¯ã€‚å¦å¤–ï¼Œ<code>https</code>æ¨¡å—é‡åˆ°è¿™ä¸ªé—®é¢˜æ—¶ä¹Ÿä¸€æ ·é€šè¿‡<code>https.globalAgent.maxSockets</code>å±æ€§æ¥å¤„ç†ã€‚</p></div><!----><!----><!----></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link vp-meta-label" href="https://github.com/yzqdev/cs-guide/edit/main/docs/node-tutor/apis/http.md" aria-label="ç¼–è¾‘æ­¤é¡µ" rel="noopener noreferrer" target="_blank"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon" name="edit"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->ç¼–è¾‘æ­¤é¡µ<!----></a></div><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">æœ€è¿‘æ›´æ–°: </span><time class="vp-meta-info" datetime="2024-04-08T04:01:15.000Z" data-allow-mismatch>2024/4/8 04:01</time></div><div class="contributors"><span class="vp-meta-label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="vp-meta-info" title="email: yzqdev@outlook.com">yzqdev</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="route-link auto-link prev" href="/cs-guide/node-tutor/apis/file.html" aria-label="file"><div class="hint"><span class="arrow start"></span>ä¸Šä¸€é¡µ</div><div class="link"><!---->file</div></a><a class="route-link auto-link next" href="/cs-guide/node-tutor/apis/os.html" aria-label="os"><div class="hint">ä¸‹ä¸€é¡µ<span class="arrow end"></span></div><div class="link">os<!----></div></a></nav><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;"><div style="display: flex;align-items: center;justify-content: center;height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!----><!--]--></main><!--]--><!----></div><!--]--><!--]--><!--[--><!----><div id="pwa-install"><!----><div id="install-modal-wrapper" style="display:none;"><div class="background"></div><div class="install-modal"><div class="header"><button type="button" class="close-button" aria-label="å…³é—­"><svg xmlns="http://www.w3.org/2000/svg" class="icon close-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="close icon"><path d="M589.654 511.965 1007.212 84.22a49.777 49.777 0 0 0-.73-70.02 49.046 49.046 0 0 0-69.687.665L519.967 441.946 85.882 14.2a49.08 49.08 0 0 0-69.687.664 49.777 49.777 0 0 0 .664 70.019l433.454 427.082L16.859 939.048a49.777 49.777 0 0 0-.664 70.019 49.013 49.013 0 0 0 69.687.663l434.085-427.746 416.828 427.083A49.013 49.013 0 0 0 972.037 1024a48.416 48.416 0 0 0 34.512-14.27 49.777 49.777 0 0 0 .73-70.019z"></path></svg></button><div class="logo"><!----><div class="title"><h1></h1><p class="desc">è¯¥åº”ç”¨å¯ä»¥å®‰è£…åœ¨ä½ çš„ PC æˆ–ç§»åŠ¨è®¾å¤‡ä¸Šã€‚è¿™å°†ä½¿è¯¥ Web åº”ç”¨ç¨‹åºå¤–è§‚å’Œè¡Œä¸ºä¸å…¶ä»–åº”ç”¨ç¨‹åºç›¸åŒã€‚å®ƒå°†åœ¨å‡ºç°åœ¨åº”ç”¨ç¨‹åºåˆ—è¡¨ä¸­ï¼Œå¹¶å¯ä»¥å›ºå®šåˆ°ä¸»å±å¹•ï¼Œå¼€å§‹èœå•æˆ–ä»»åŠ¡æ ã€‚æ­¤ Web åº”ç”¨ç¨‹åºè¿˜å°†èƒ½å¤Ÿä¸å…¶ä»–åº”ç”¨ç¨‹åºå’Œä½ çš„æ“ä½œç³»ç»Ÿå®‰å…¨åœ°è¿›è¡Œäº¤äº’ã€‚</p></div></div></div><div class="content"><div class="highlight"><!----><!----></div><div class="description"><h3>è¯¦æƒ…</h3><p></p></div></div><div class="button-wrapper"><button type="button" class="install-button">å®‰è£…<span></span></button><button type="button" class="cancel-button">å–æ¶ˆ</button></div></div></div></div><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/cs-guide/assets/app-B6vXTniy.js" defer></script>
  </body>
</html>
