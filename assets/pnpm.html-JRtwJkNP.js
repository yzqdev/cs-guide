import{_ as n,c as a,a as p,o as e}from"./app-B6vXTniy.js";const t={};function o(l,s){return e(),a("div",null,[...s[0]||(s[0]=[p(`<h1 id="pnpm教程" tabindex="-1"><a class="header-anchor" href="#pnpm教程"><span>pnpm教程</span></a></h1><div class="hint-container tip"><p class="hint-container-title">提示</p><p>注意,建议不要配置store-dir,这样他会在每个磁盘的根目录创建.pnpm-store文件夹来存储缓存</p><p>原因:包存储应与安装的位置处于同一驱动器和文件系统上，否则，包将被复制，而不是被链接。 这是由于硬链接的工作方式带来的一个限制，因为一个文件系统上的文件无法寻址另一个文件系统中的位置</p></div><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">pnpm</span> config <span class="token builtin class-name">set</span> store-dir /path/to/.pnpm-store</span>
<span class="line"></span>
<span class="line">并且设置自动安装peerdependencies</span>
<span class="line"><span class="token function">pnpm</span> config <span class="token builtin class-name">set</span> auto-install-peers <span class="token boolean">true</span></span>
<span class="line"></span></code></pre></div><h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h2><p>全称performant npm(高性能的npm)，见名知意，就是一个npm的替代品，至于为什么高性能，用什么样的方式解决了依赖包体积趋近于黑洞的问题,解决了什么问题呢?可以参考大佬的说明<a href="https://juejin.cn/post/6932046455733485575" target="_blank" rel="noopener noreferrer">掘金</a>,<a href="https://pnpm.io/zh/motivation" target="_blank" rel="noopener noreferrer">官网</a></p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>注意: pnpm在固态硬盘上性能最好,机械硬盘上安装时间可能需要半小时, 推荐在固态硬盘使用pnpm,在机械硬盘使用yarn</p></div><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h2><p>nodejs v16.13.0之后的版本内置了实验性的工具corepack，就是nodejs内置的一个管理包管理器的一个东西,<a href="https://github.com/nodejs/corepack/blob/main/README.md" target="_blank" rel="noopener noreferrer">文档</a></p><p>这个corepack就是版本之后默认自带的一个工具，专门用来管理这些安装依赖的这些个工具，自带npm,yarn,pnpm,不用我们手动安装</p><p>切换到指定版本，接着按照pnpm官网的文档，先把实验性的corepack开启</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">corepack <span class="token builtin class-name">enable</span></span>
<span class="line"></span></code></pre></div><p>通常corepack中的包管理器版本都不是最新的所以我们要升级到最新，关于最新的pnpm版本号，<a href="https://www.npmjs.com/package/pnpm" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/v/pnpm.svg" alt="npm version"></a>可以去npmjs官网去看</p><p>yarn版本<a href="https://www.npmjs.com/package/yarn" target="_blank" rel="noopener noreferrer"><img src="https://img.shields.io/npm/v/yarn.svg" alt="npm version"></a></p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"></span>
<span class="line">corepack prepare pnpm@* <span class="token parameter variable">--activate</span></span>
<span class="line"></span></code></pre></div><p>或者使用npm安装</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">npm</span> i <span class="token parameter variable">-g</span> <span class="token function">pnpm</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">pnpm安装包</span>
<span class="line"><span class="token function">pnpm</span> <span class="token function">install</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h3 id="安装全局包" tabindex="-1"><a class="header-anchor" href="#安装全局包"><span>安装全局包</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">pnpm</span> <span class="token function">add</span> <span class="token parameter variable">-g</span> serve</span>
<span class="line"></span></code></pre></div><p>workspace用于lerna项目,不需要在子项目做install的操作 pnpm-workspace.yaml</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">packages:</span>
<span class="line">  <span class="token comment"># all packages in subdirs of packages/ and components/</span></span>
<span class="line">  - <span class="token string">&#39;packages/**&#39;</span></span>
<span class="line">  - <span class="token string">&#39;components/**&#39;</span></span>
<span class="line">  <span class="token comment"># exclude packages that are inside test directories</span></span>
<span class="line">  - <span class="token string">&#39;!**/test/**&#39;</span></span>
<span class="line"></span></code></pre></div><p>硬链接的优点：</p><ul><li>兼容性好</li><li>盘符被更改也不会受影响</li><li>无需管理员的权限</li></ul><p>硬链接的缺点：</p><ul><li>必须在同一个分区</li><li>仅支持本地驱动器</li><li>不支持为文件夹创建硬链接</li></ul><div class="hint-container tip"><p class="hint-container-title">提示</p><p>全局安装的包</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;@antfu/ni&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.17.2&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;@nestjs/cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^9.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;@neutralinojs/neu&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^9.3.1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;@quasar/cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.3.2&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;@vue/cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.0.8&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;@vue/devtools&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^6.1.4&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;create-quasar&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.28&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;create-vite&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;electron&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^19.0.7&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;esno&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.16.3&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;fkill-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.1.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;gulp-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.3.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;hexo-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.3.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;hugo-installer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.1.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;increase-memory-limit-fixbug&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;iroiro&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.2.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;json-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.17.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;lerna&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.1.6&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;less&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.1.2&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;local-web-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.2.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;nativefier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^47.2.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;npkill&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.8.3&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;npm-check-updates&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^14.0.1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;npm-home&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;nrm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.2.5&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;pkg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.7.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;pm2&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.2.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;pm2-windows-service&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.2.1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;pnpm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^7.5.2&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;prettier&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.7.1&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;pug-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.0.0-alpha6&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;rimraf&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.0.2&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;rollup&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.70.2&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;sass&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^1.51.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;stylus&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.57.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;taze&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.7.6&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;typeorm&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^0.3.6&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;typescript&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.6.3&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;vercel&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^27.0.2&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><h2 id="清理" tabindex="-1"><a class="header-anchor" href="#清理"><span>清理</span></a></h2><div class="language-text" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">pnpm remove axios</span>
<span class="line">但是node_modules/.pnpm下面的文件还在怎么办</span>
<span class="line"></span>
<span class="line">pnpm prune</span>
<span class="line">清理没有引用的依赖</span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h2 id="想引用依赖的依赖怎么办" tabindex="-1"><a class="header-anchor" href="#想引用依赖的依赖怎么办"><span>想引用依赖的依赖怎么办</span></a></h2><p>添加一个.npmrc</p><div class="language-ini" data-highlighter="prismjs" data-ext="ini"><pre><code class="language-ini"><span class="line"><span class="token key attr-name">hoist</span><span class="token punctuation">=</span><span class="token value attr-value">true</span></span>
<span class="line"><span class="token key attr-name">public-hoist-pattern[]</span><span class="token punctuation">=</span><span class="token value attr-value">vue-router</span></span>
<span class="line">//这是想要提升到node_modules文件夹的依赖</span>
<span class="line"></span>
<span class="line"></span></code></pre></div>`,30)])])}const c=n(t,[["render",o]]),r=JSON.parse('{"path":"/frontend/package-manager/pnpm.html","title":"pnpm教程","lang":"zh-CN","frontmatter":{"description":"pnpm教程 提示 注意,建议不要配置store-dir,这样他会在每个磁盘的根目录创建.pnpm-store文件夹来存储缓存 原因:包存储应与安装的位置处于同一驱动器和文件系统上，否则，包将被复制，而不是被链接。 这是由于硬链接的工作方式带来的一个限制，因为一个文件系统上的文件无法寻址另一个文件系统中的位置 介绍 全称performant npm(高...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"pnpm教程\\",\\"image\\":[\\"https://img.shields.io/npm/v/pnpm.svg\\",\\"https://img.shields.io/npm/v/yarn.svg\\"],\\"dateModified\\":\\"2024-05-11T11:40:56.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"yzqdev\\",\\"url\\":\\"http://www.yzqdev.top\\"}]}"],["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/frontend/package-manager/pnpm.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"pnpm教程"}],["meta",{"property":"og:description","content":"pnpm教程 提示 注意,建议不要配置store-dir,这样他会在每个磁盘的根目录创建.pnpm-store文件夹来存储缓存 原因:包存储应与安装的位置处于同一驱动器和文件系统上，否则，包将被复制，而不是被链接。 这是由于硬链接的工作方式带来的一个限制，因为一个文件系统上的文件无法寻址另一个文件系统中的位置 介绍 全称performant npm(高..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://img.shields.io/npm/v/pnpm.svg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-11T11:40:56.000Z"}],["meta",{"property":"article:modified_time","content":"2024-05-11T11:40:56.000Z"}]]},"git":{"createdTime":1647861419000,"updatedTime":1715427656000,"contributors":[{"name":"yzqdev","username":"yzqdev","email":"yzqdev@outlook.com","commits":10,"url":"https://github.com/yzqdev"}]},"readingTime":{"minutes":2.55,"words":764},"filePathRelative":"frontend/package-manager/pnpm.md","autoDesc":true}');export{c as comp,r as data};
