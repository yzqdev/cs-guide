import{_ as n,c as a,a as p,o as t}from"./app-B6vXTniy.js";const e={};function o(c,s){return t(),a("div",null,[...s[0]||(s[0]=[p(`<h1 id="asp运行局域网访问" tabindex="-1"><a class="header-anchor" href="#asp运行局域网访问"><span>asp运行局域网访问</span></a></h1><blockquote><p>注意: <code>launchSettings.json</code>在开发环境优先级高于<code>appsettings.json</code> 打开properties文件夹下面的<code>launchSettings.json</code>然后使用<code>&quot;applicationUrl&quot;: &quot;http://0.0.0.0:5059&quot;,</code></p></blockquote><p>下面是例子</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;$schema&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://json.schemastore.org/launchsettings.json&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;iisSettings&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;windowsAuthentication&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;anonymousAuthentication&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;iisExpress&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;applicationUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:15455&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;sslPort&quot;</span><span class="token operator">:</span> <span class="token number">0</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;profiles&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;SimpleApi&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;commandName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Project&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;dotnetRunMessages&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;launchBrowser&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;launchUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;swagger&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;applicationUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://0.0.0.0:5059&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;environmentVariables&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;ASPNETCORE_ENVIRONMENT&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Development&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;IIS Express&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;commandName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;IISExpress&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;launchBrowser&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;launchUrl&quot;</span><span class="token operator">:</span> <span class="token string">&quot;swagger&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;environmentVariables&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;ASPNETCORE_ENVIRONMENT&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Development&quot;</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="打包exe设置端口-硬编码" tabindex="-1"><a class="header-anchor" href="#打包exe设置端口-硬编码"><span>打包exe设置端口(硬编码)</span></a></h2><div class="language-csharp" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line"><span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebApplication<span class="token punctuation">.</span><span class="token function">CreateBuilder</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">builder<span class="token punctuation">.</span>WebHost<span class="token punctuation">.</span><span class="token function">UseUrls</span><span class="token punctuation">(</span><span class="token string">&quot;http://*:3045&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name"><span class="token keyword">var</span></span> app <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">MapGet</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;Hello World!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><h2 id="打包后配置url" tabindex="-1"><a class="header-anchor" href="#打包后配置url"><span>打包后配置url</span></a></h2><p>在<code>appsettings.json</code>设置url</p><div class="language-json" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">   </span>
<span class="line">  <span class="token property">&quot;appName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mock name&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;Logging&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;LogLevel&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;Default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Information&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;Microsoft.AspNetCore&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Warning&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;AllowedHosts&quot;</span><span class="token operator">:</span> <span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token property">&quot;Urls&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://*:5411&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>前提示没有在代码中硬编码</p><div class="language-csharp" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line">builder<span class="token punctuation">.</span>WebHost<span class="token punctuation">.</span><span class="token function">UseUrls</span><span class="token punctuation">(</span><span class="token string">&quot;http://*:3045&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><h2 id="读取appsettings-json的配置" tabindex="-1"><a class="header-anchor" href="#读取appsettings-json的配置"><span>读取appsettings.json的配置</span></a></h2><p>Confservice.cs</p><div class="language-csharp" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line">  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConfService</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">IConfiguration</span> _cfg<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token function">ConfService</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> cfg<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> _cfg <span class="token operator">=</span> cfg<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 支持冒号分层</span></span>
<span class="line">      <span class="token class-name"><span class="token keyword">string</span></span> conn <span class="token operator">=</span> _cfg<span class="token punctuation">[</span><span class="token string">&quot;BookStoreDatabase:ConnectionString&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token class-name"><span class="token keyword">string</span></span> db   <span class="token operator">=</span> _cfg<span class="token punctuation">[</span><span class="token string">&quot;appName&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">      Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>db<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><p>Program.cs</p><div class="language-csharp" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line"> builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ConfService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>然后在controller使用</p><div class="language-csharp" data-highlighter="prismjs" data-ext="cs"><pre><code class="language-csharp"><span class="line"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiController</span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/index&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IndexController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ControllerBase</span></span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">ConfService</span> _confService<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token function">IndexController</span><span class="token punctuation">(</span><span class="token class-name">ConfService</span> confService<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        _confService <span class="token operator">=</span> confService<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;/count&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> <span class="token function">Index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        _confService<span class="token punctuation">.</span><span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token number">1222</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div>`,18)])])}const i=n(e,[["render",o]]),u=JSON.parse('{"path":"/csharp-tutor/aspnet/cors.html","title":"asp运行局域网访问","lang":"zh-CN","frontmatter":{"description":"asp运行局域网访问 注意: launchSettings.json在开发环境优先级高于appsettings.json 打开properties文件夹下面的launchSettings.json然后使用\\"applicationUrl\\": \\"http://0.0.0.0:5059\\", 下面是例子 打包exe设置端口(硬编码) 打包后配置url 在app...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"asp运行局域网访问\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2025-11-23T04:50:59.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"yzqdev\\",\\"url\\":\\"http://www.yzqdev.top\\"}]}"],["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/csharp-tutor/aspnet/cors.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"asp运行局域网访问"}],["meta",{"property":"og:description","content":"asp运行局域网访问 注意: launchSettings.json在开发环境优先级高于appsettings.json 打开properties文件夹下面的launchSettings.json然后使用\\"applicationUrl\\": \\"http://0.0.0.0:5059\\", 下面是例子 打包exe设置端口(硬编码) 打包后配置url 在app..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-11-23T04:50:59.000Z"}],["meta",{"property":"article:modified_time","content":"2025-11-23T04:50:59.000Z"}]]},"git":{"createdTime":1654086804000,"updatedTime":1763873459000,"contributors":[{"name":"yzqdev","username":"yzqdev","email":"yzqdev@outlook.com","commits":4,"url":"https://github.com/yzqdev"}]},"readingTime":{"minutes":0.79,"words":237},"filePathRelative":"csharp-tutor/aspnet/cors.md","autoDesc":true}');export{i as comp,u as data};
