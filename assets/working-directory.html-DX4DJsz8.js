import{_ as t,c as a,a as n,o as e}from"./app-C8DxhDIZ.js";const i="/cs-guide/assets/git3-63iS0-9E.jpg",o="/cs-guide/assets/git4-d8P-6ksl.jpg",p={};function c(r,s){return e(),a("div",null,s[0]||(s[0]=[n('<p>Git 和其他版本控制系统如 SVN 的一个不同之处就是有暂存区的概念。</p><h2 id="工作区-working-directory" tabindex="-1"><a class="header-anchor" href="#工作区-working-directory"><span>工作区(Working Directory)</span></a></h2><p>就是您在电脑里能看到的目录，比如 learngit 文件夹就是一个工作区:</p><h2 id="版本库-repository" tabindex="-1"><a class="header-anchor" href="#版本库-repository"><span>版本库(Repository)</span></a></h2><p>工作区有一个隐藏目录.git，这个不算工作区，而是 Git 的版本库。</p><p>Git 的版本库里存了很多东西，其中最重要的就是称为 stage(或者叫 index)的暂存区，还有 Git 为我们自动创建的第一个分支 <code>master</code>，以及指向 master 的一个指针叫 <code>HEAD</code>。</p><p><img src="'+i+`" alt="版本库图例"></p><p>前面讲了我们把文件往 Git 版本库里添加的时候，提交更改，实际上就是把暂存区的所有内容提交到当前分支。我们创建 Git 版本库时，Git 自动为我们创建了唯一一个 <code>master</code> 分支，所以，现在，<code>git commit</code> 就是往 master 分支上提交更改。</p><p>您可以简单理解为，需要提交的文件修改通通放到暂存区，然后，一次性提交暂存区的所有修改。</p><p>先对 readme.txt 做个修改，比如加上一行内容:</p><div class="language-markdown" data-highlighter="prismjs" data-ext="md" data-title="md"><pre><code><span class="line">Git is a distributed version control system.</span>
<span class="line">Git is free software distributed under the GPL.</span>
<span class="line">Git has a mutable index called stage.</span>
<span class="line"></span></code></pre></div><p>然后，在工作区新增一个 LICENSE 文本文件(内容随便写)。</p><p>先用 <code>git status</code> 查看一下状态:</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">git</span> status</span>
<span class="line">On branch master</span>
<span class="line">Changes not staged <span class="token keyword">for</span> commit:</span>
<span class="line">  <span class="token punctuation">(</span>use <span class="token string">&quot;git add &lt;file&gt;...&quot;</span> to update what will be committed<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">(</span>use <span class="token string">&quot;git checkout -- &lt;file&gt;...&quot;</span> to discard changes <span class="token keyword">in</span> working directory<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    modified:   readme.txt</span>
<span class="line"></span>
<span class="line">Untracked files:</span>
<span class="line">  <span class="token punctuation">(</span>use <span class="token string">&quot;git add &lt;file&gt;...&quot;</span> to include <span class="token keyword">in</span> what will be committed<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    LICENSE</span>
<span class="line"></span>
<span class="line">no changes added to commit <span class="token punctuation">(</span>use <span class="token string">&quot;git add&quot;</span> and/or <span class="token string">&quot;git commit -a&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>Git 非常清楚地告诉我们，readme.txt 被修改了，而 LICENSE 还从来没有被添加过，所以它的状态是 <code>Untracked</code>。</p><p>现在，使用两次命令 <code>git add</code>，把 readme.txt 和 LICENSE 都添加后，用 <code>git status</code> 再查看一下:</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">git</span> status</span>
<span class="line">On branch master</span>
<span class="line">Changes to be committed:</span>
<span class="line">  <span class="token punctuation">(</span>use <span class="token string">&quot;git reset HEAD &lt;file&gt;...&quot;</span> to unstage<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    new file:   LICENSE</span>
<span class="line">    modified:   readme.txt</span>
<span class="line"></span></code></pre></div><p>现在，暂存区的状态就变成这样了:</p><p><img src="`+o+`" alt="状态示意图"></p><p>所以，<code>git add</code> 命令实际上就是把要提交的所有修改放到暂存区(Stage)，然后，执行 <code>git commit</code> 就可以一次性把暂存区的所有修改提交到分支。</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">&quot;understand how stage works&quot;</span></span>
<span class="line"><span class="token punctuation">[</span>master e43a48b<span class="token punctuation">]</span> understand how stage works</span>
<span class="line"> <span class="token number">2</span> files changed, <span class="token number">2</span> insertions<span class="token punctuation">(</span>+<span class="token punctuation">)</span></span>
<span class="line"> create mode <span class="token number">100644</span> LICENSE</span>
<span class="line"></span></code></pre></div><p>一旦提交后，如果您又没有对工作区做任何修改，那么工作区就是“干净”的:</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">$ <span class="token function">git</span> status</span>
<span class="line">On branch master</span>
<span class="line">nothing to commit, working tree clean</span>
<span class="line"></span></code></pre></div>`,23)]))}const d=t(p,[["render",c]]),g=JSON.parse('{"path":"/git-tutor/git/working-directory.html","title":"工作区和暂存区","lang":"zh-CN","frontmatter":{"title":"工作区和暂存区","icon":"workingDirectory","author":"廖雪峰","category":"Git","tag":["Git","软件"],"copyright":"Copyright by 廖雪峰 Edited by Mr.Hope","description":"Git 和其他版本控制系统如 SVN 的一个不同之处就是有暂存区的概念。 工作区(Working Directory) 就是您在电脑里能看到的目录，比如 learngit 文件夹就是一个工作区: 版本库(Repository) 工作区有一个隐藏目录.git，这个不算工作区，而是 Git 的版本库。 Git 的版本库里存了很多东西，其中最重要的就是称为 ...","head":[["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/git-tutor/git/working-directory.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"工作区和暂存区"}],["meta",{"property":"og:description","content":"Git 和其他版本控制系统如 SVN 的一个不同之处就是有暂存区的概念。 工作区(Working Directory) 就是您在电脑里能看到的目录，比如 learngit 文件夹就是一个工作区: 版本库(Repository) 工作区有一个隐藏目录.git，这个不算工作区，而是 Git 的版本库。 Git 的版本库里存了很多东西，其中最重要的就是称为 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-06-25T05:00:38.000Z"}],["meta",{"property":"article:author","content":"廖雪峰"}],["meta",{"property":"article:tag","content":"Git"}],["meta",{"property":"article:tag","content":"软件"}],["meta",{"property":"article:modified_time","content":"2023-06-25T05:00:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"工作区和暂存区\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-06-25T05:00:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"廖雪峰\\"}]}"]]},"headers":[{"level":2,"title":"工作区(Working Directory)","slug":"工作区-working-directory","link":"#工作区-working-directory","children":[]},{"level":2,"title":"版本库(Repository)","slug":"版本库-repository","link":"#版本库-repository","children":[]}],"git":{"createdTime":1687669238000,"updatedTime":1687669238000,"contributors":[{"name":"yzqdev","username":"yzqdev","email":"yzqdev@outlook.com","commits":1,"url":"https://github.com/yzqdev"}]},"readingTime":{"minutes":2.21,"words":662},"filePathRelative":"git-tutor/git/working-directory.md","localizedDate":"2023年6月25日","autoDesc":true}');export{d as comp,g as data};
