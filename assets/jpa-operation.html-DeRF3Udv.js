import{_ as s,c as n,a as e,o as t}from"./app-C8DxhDIZ.js";const p={};function i(l,a){return t(),n("div",null,a[0]||(a[0]=[e(`<h1 id="jpa操作" tabindex="-1"><a class="header-anchor" href="#jpa操作"><span>jpa操作</span></a></h1><h2 id="更新-update" tabindex="-1"><a class="header-anchor" href="#更新-update"><span>更新(update)</span></a></h2><div class="language-java" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token annotation punctuation">@Modifying</span></span>
<span class="line"><span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;update User u set u.firstname = ?1, u.lastname = ?2 where u.id = ?3&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">setUserInfoById</span><span class="token punctuation">(</span><span class="token class-name">String</span> firstname<span class="token punctuation">,</span> <span class="token class-name">String</span> lastname<span class="token punctuation">,</span> <span class="token class-name">Integer</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>或者使用save,但是必须带有id</p><div class="language-java" data-highlighter="prismjs" data-ext="java" data-title="java"><pre><code><span class="line"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token class-name">Userinfos</span> u<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">User</span> userFromDb <span class="token operator">=</span> userRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>u<span class="token punctuation">.</span><span class="token function">getid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token comment">// crush the variables of the object found</span></span>
<span class="line">    userFromDb<span class="token punctuation">.</span><span class="token function">setFirstname</span><span class="token punctuation">(</span><span class="token string">&quot;john&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span>
<span class="line">    userFromDb<span class="token punctuation">.</span><span class="token function">setLastname</span><span class="token punctuation">(</span><span class="token string">&quot;dew&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    userFromDb<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    userRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>userFromDb<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h2 id="jpa的dialect" tabindex="-1"><a class="header-anchor" href="#jpa的dialect"><span>jpa的dialect</span></a></h2><p>只有sqlite需要community dialect,其他的hibernate-core包含了</p><h3 id="sqlite" tabindex="-1"><a class="header-anchor" href="#sqlite"><span>sqlite</span></a></h3><div class="language-kotlin" data-highlighter="prismjs" data-ext="kt" data-title="kt"><pre><code><span class="line"> </span>
<span class="line"></span>
<span class="line"><span class="token function">implementation</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;org.xerial:sqlite-jdbc&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token function">implementation</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;org.hibernate.orm:hibernate-community-dialects&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>下面需要依赖<code>org.hibernate.orm:hibernate-community-dialects</code></p><div class="language-propeties" data-highlighter="prismjs" data-ext="propeties" data-title="propeties"><pre><code><span class="line">spring.jpa.hibernate.ddl-auto=update  </span>
<span class="line">spring.jpa.show-sql=true  </span>
<span class="line">#org.hibernate.community.dialect  </span>
<span class="line">spring.jpa.database-platform=org.hibernate.community.dialect.SQLiteDialect  </span>
<span class="line">spring.datasource.url=jdbc:sqlite:./demo-sqlite.db  </span>
<span class="line">#spring.datasource.url=jdbc:sqlite:\${user.home}/demo-sqlite.db  </span>
<span class="line">spring.datasource.username=  </span>
<span class="line">spring.datasource.password=  </span>
<span class="line">spring.datasource.driver-class-name=org.sqlite.JDBC</span>
<span class="line"></span></code></pre></div><h3 id="postgres" tabindex="-1"><a class="header-anchor" href="#postgres"><span>postgres</span></a></h3><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">驱动</span>
<span class="line">runtimeOnly(&quot;org.postgresql:postgresql&quot;)</span>
<span class="line"></span></code></pre></div><div class="language-properties" data-highlighter="prismjs" data-ext="properties" data-title="properties"><pre><code><span class="line"><span class="token key attr-name">spring.jpa.hibernate.ddl-auto</span><span class="token punctuation">=</span><span class="token value attr-value">update  </span></span>
<span class="line"><span class="token key attr-name">spring.jpa.show-sql</span><span class="token punctuation">=</span><span class="token value attr-value">true  </span></span>
<span class="line"><span class="token comment">#org.hibernate.community.dialect  </span></span>
<span class="line"><span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">postgres  </span></span>
<span class="line"><span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span><span class="token value attr-value">123456  </span></span>
<span class="line"><span class="token key attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">org.postgresql.Driver  </span></span>
<span class="line"><span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:postgresql://localhost:5432/rose?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf8&amp;characterSetResults=utf8&amp;useSSL=false</span></span>
<span class="line"></span></code></pre></div><h3 id="mariadb" tabindex="-1"><a class="header-anchor" href="#mariadb"><span>mariadb</span></a></h3><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">驱动</span>
<span class="line">runtimeOnly(&quot;org.mariadb.jdbc:mariadb-java-client&quot;)</span>
<span class="line"></span></code></pre></div><div class="language-text" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">spring.jpa.hibernate.ddl-auto=update  </span>
<span class="line">spring.jpa.show-sql=true  </span>
<span class="line">#org.hibernate.community.dialect  </span>
<span class="line">spring.jpa.database-platform=org.hibernate.dialect.MariaDBDialect  </span>
<span class="line">spring.datasource.username=postgres  </span>
<span class="line">spring.datasource.password=123456  </span>
<span class="line">spring.datasource.driver-class-name=org.mariadb.jdbc.Driver  </span>
<span class="line">spring.datasource.url=jdbc:mariadb://localhost:3307/rose?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf8&amp;characterSetResults=utf8&amp;useSSL=false</span>
<span class="line"></span></code></pre></div>`,17)]))}const c=s(p,[["render",i]]),r=JSON.parse('{"path":"/java-tutor/orm-tutor/jpa-operation.html","title":"jpa操作","lang":"zh-CN","frontmatter":{"description":"jpa操作 更新(update) 或者使用save,但是必须带有id jpa的dialect 只有sqlite需要community dialect,其他的hibernate-core包含了 sqlite 下面需要依赖org.hibernate.orm:hibernate-community-dialects postgres mariadb","head":[["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/java-tutor/orm-tutor/jpa-operation.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"jpa操作"}],["meta",{"property":"og:description","content":"jpa操作 更新(update) 或者使用save,但是必须带有id jpa的dialect 只有sqlite需要community dialect,其他的hibernate-core包含了 sqlite 下面需要依赖org.hibernate.orm:hibernate-community-dialects postgres mariadb"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-24T08:24:01.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-24T08:24:01.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"jpa操作\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-24T08:24:01.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"yzqdev\\",\\"url\\":\\"http://www.yzqdev.top\\"}]}"]]},"headers":[{"level":2,"title":"更新(update)","slug":"更新-update","link":"#更新-update","children":[]},{"level":2,"title":"jpa的dialect","slug":"jpa的dialect","link":"#jpa的dialect","children":[{"level":3,"title":"sqlite","slug":"sqlite","link":"#sqlite","children":[]},{"level":3,"title":"postgres","slug":"postgres","link":"#postgres","children":[]},{"level":3,"title":"mariadb","slug":"mariadb","link":"#mariadb","children":[]}]}],"git":{"createdTime":1665903460000,"updatedTime":1711268641000,"contributors":[{"name":"yzqdev","username":"yzqdev","email":"yzqdev@outlook.com","commits":3,"url":"https://github.com/yzqdev"}]},"readingTime":{"minutes":0.7,"words":211},"filePathRelative":"java-tutor/orm-tutor/jpa-operation.md","localizedDate":"2022年10月16日","autoDesc":true}');export{c as comp,r as data};
