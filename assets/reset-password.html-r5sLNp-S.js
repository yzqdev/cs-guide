import{_ as a,c as n,a as e,o as p}from"./app-B6vXTniy.js";const t={};function o(l,s){return p(),n("div",null,[...s[0]||(s[0]=[e(`<h1 id="mysql重置密码" tabindex="-1"><a class="header-anchor" href="#mysql重置密码"><span>mysql重置密码</span></a></h1><h2 id="配置source" tabindex="-1"><a class="header-anchor" href="#配置source"><span>配置source</span></a></h2><p><a href="https://dev.mysql.com/downloads/" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/downloads/</a> 下载mysql8的config文件,然后在ubuntu上安装</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">sudo</span> dpkg <span class="token parameter variable">-i</span> mysql_.deb</span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt</span> update </span>
<span class="line"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> mysql-server</span>
<span class="line"></span></code></pre></div><p>然后就安装好了</p><h2 id="配置mysql的远程root用户访问权限" tabindex="-1"><a class="header-anchor" href="#配置mysql的远程root用户访问权限"><span>配置mysql的远程root用户访问权限</span></a></h2><ol><li>命令行登录 mysql,输入用户名，密码</li></ol><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># mysql -u root -p</span></span>
<span class="line"></span></code></pre></div><p>2.切换到 mysql库</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">use mysql<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>3.查看用户表,可以看到当前host是localhost,只允许本地访问</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> host,user from user<span class="token punctuation">;</span></span>
<span class="line">+-----------+------------------+</span>
<span class="line"><span class="token operator">|</span> <span class="token function">host</span>      <span class="token operator">|</span> user             <span class="token operator">|</span></span>
<span class="line">+-----------+------------------+</span>
<span class="line"><span class="token operator">|</span> localhost <span class="token operator">|</span> root             <span class="token operator">|</span></span>
<span class="line">+-----------+------------------+</span>
<span class="line"><span class="token number">1</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>4.更新user用户表</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">mysql<span class="token operator">&gt;</span> update user <span class="token builtin class-name">set</span> <span class="token variable"><span class="token variable">\`</span><span class="token function">host</span><span class="token variable">\`</span></span> <span class="token operator">=</span> <span class="token string">&#39;%&#39;</span>  where <span class="token variable"><span class="token variable">\`</span>user<span class="token variable">\`</span></span> <span class="token operator">=</span> <span class="token string">&#39;root&#39;</span>  LIMIT <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>5.分配所有访问权限,如果已分配过，该步骤可跳过</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">mysql<span class="token operator">&gt;</span> GRANT ALL PRIVILEGES ON *.* TO <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span> IDENTIFIED BY <span class="token string">&#39;root密码&#39;</span> WITH GRANT OPTION<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>6.强制刷新权限</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">mysql<span class="token operator">&gt;</span> flush privileges<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>7.再次查看用户表,root用户的host变成%，即允许所有的ip远程访问，如果需要指定具体的ip，就写上具体的ip即可</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> host,user from user<span class="token punctuation">;</span></span>
<span class="line">+-----------+------------------+</span>
<span class="line"><span class="token operator">|</span> Host      <span class="token operator">|</span> User             <span class="token operator">|</span></span>
<span class="line">+-----------+------------------+</span>
<span class="line"><span class="token operator">|</span> %         <span class="token operator">|</span> root             <span class="token operator">|</span></span>
<span class="line">+-----------+------------------+</span>
<span class="line"><span class="token number">1</span> rows <span class="token keyword">in</span> <span class="token builtin class-name">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><h2 id="修改mysql配置文件my-cnf" tabindex="-1"><a class="header-anchor" href="#修改mysql配置文件my-cnf"><span>修改mysql配置文件my.cnf</span></a></h2><p>1.使用命令<code>netstat -an|grep 3306</code> 查看端口监听状态如下所示，绑定了127.0.0.1，只允许本地访问，需要修改配置文件：</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># netstat -an|grep 3306</span></span>
<span class="line">tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">127.0</span>.0.1:3306          <span class="token number">0.0</span>.0.0:*               LISTEN</span>
<span class="line"></span></code></pre></div><p>2.修改my.cnf，注释掉<code>bind-address 127.0.0.1</code>属性，修改后如下图所示</p><p><img src="https://upload-images.jianshu.io/upload_images/6597489-5e9f258ab9966494.png?imageMogr2/auto-orient/strip|imageView2/2/w/477/format/webp#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=xjPeI&amp;originHeight=71&amp;originWidth=477&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt="bind"></p><p>注释掉bind-address</p><p>3.重启mysql服务<code>service mysql restart</code>,再次使用命令<code>netstat -an|grep 3306</code>查看端口监听状态</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># netstat -an|grep 3306</span></span>
<span class="line">tcp        <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">127.0</span>.0.1:55074         <span class="token number">127.0</span>.0.1:3306          TIME_WAIT  </span>
<span class="line">tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::3306                 :::*                    LISTEN</span>
<span class="line"></span></code></pre></div><h2 id="配置阿里云安全组规则" tabindex="-1"><a class="header-anchor" href="#配置阿里云安全组规则"><span>配置阿里云安全组规则</span></a></h2><p>登录阿里云进入控制台，依次访问<strong>网络和安全-&gt;安全组-&gt;配置规则</strong>，在入方向上开放MySQL监听端口3306即可，如下所示</p><p><img src="https://upload-images.jianshu.io/upload_images/6597489-03199ab0f8ad6c89.png?imageMogr2/auto-orient/strip|imageView2/2/w/943/format/webp#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=ggs1O&amp;originHeight=66&amp;originWidth=943&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>开放mysql的3306端口</p><p>到此，阿里云服务器的MYSQL数据库远程访问开启成功，使用客户端测试连接成功。</p><p>​</p><h2 id="mysql" tabindex="-1"><a class="header-anchor" href="#mysql"><span>mysql</span></a></h2><p>注意一点 <code>Java时间比数据库时间早8小时，设置 serverTimezone=Asia/Shanghai</code> ​</p><h3 id="忘记密码" tabindex="-1"><a class="header-anchor" href="#忘记密码"><span>忘记密码</span></a></h3><p><a href="https://dev.mysql.com/doc/refman/8.0/en/resetting-permissions.html#resetting-permissions-windows" target="_blank" rel="noopener noreferrer">https://dev.mysql.com/doc/refman/8.0/en/resetting-permissions.html#resetting-permissions-windows</a></p>`,38)])])}const i=a(t,[["render",o]]),c=JSON.parse('{"path":"/java-tutor/orm-tutor/mysql/reset-password.html","title":"mysql重置密码","lang":"zh-CN","frontmatter":{"description":"mysql重置密码 配置source https://dev.mysql.com/downloads/ 下载mysql8的config文件,然后在ubuntu上安装 然后就安装好了 配置mysql的远程root用户访问权限 命令行登录 mysql,输入用户名，密码 2.切换到 mysql库 3.查看用户表,可以看到当前host是localhost,只允...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"mysql重置密码\\",\\"image\\":[\\"https://upload-images.jianshu.io/upload_images/6597489-5e9f258ab9966494.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/477/format/webp#crop=0&crop=0&crop=1&crop=1&id=xjPeI&originHeight=71&originWidth=477&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=\\",\\"https://upload-images.jianshu.io/upload_images/6597489-03199ab0f8ad6c89.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/943/format/webp#crop=0&crop=0&crop=1&crop=1&id=ggs1O&originHeight=66&originWidth=943&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=\\"],\\"dateModified\\":\\"2024-03-24T08:24:01.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"yzqdev\\",\\"url\\":\\"http://www.yzqdev.top\\"}]}"],["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/java-tutor/orm-tutor/mysql/reset-password.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"mysql重置密码"}],["meta",{"property":"og:description","content":"mysql重置密码 配置source https://dev.mysql.com/downloads/ 下载mysql8的config文件,然后在ubuntu上安装 然后就安装好了 配置mysql的远程root用户访问权限 命令行登录 mysql,输入用户名，密码 2.切换到 mysql库 3.查看用户表,可以看到当前host是localhost,只允..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://upload-images.jianshu.io/upload_images/6597489-5e9f258ab9966494.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/477/format/webp#crop=0&crop=0&crop=1&crop=1&id=xjPeI&originHeight=71&originWidth=477&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-24T08:24:01.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-24T08:24:01.000Z"}]]},"git":{"createdTime":1647861419000,"updatedTime":1711268641000,"contributors":[{"name":"yzqdev","username":"yzqdev","email":"yzqdev@outlook.com","commits":4,"url":"https://github.com/yzqdev"}]},"readingTime":{"minutes":1.96,"words":587},"filePathRelative":"java-tutor/orm-tutor/mysql/reset-password.md","autoDesc":true}');export{i as comp,c as data};
