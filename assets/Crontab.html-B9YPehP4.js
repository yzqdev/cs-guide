import{_ as t,c as o,a as r,o as a}from"./app-B6vXTniy.js";const c={};function i(l,e){return a(),o("div",null,[...e[0]||(e[0]=[r('<h1 id="crontab-介绍" tabindex="-1"><a class="header-anchor" href="#crontab-介绍"><span>Crontab 介绍</span></a></h1><h2 id="crontab-安装" tabindex="-1"><a class="header-anchor" href="#crontab-安装"><span>Crontab 安装</span></a></h2><ul><li><p>查看是否已安装：</p></li><li><p>CentOS：<code>rpm -qa | grep cron</code></p></li><li><p>Ubuntu：<code>dpkg -l | grep cron</code></p></li><li><p>安装（一般系统是集成的）：</p></li><li><p>CentOS 6 / 7：<code>sudo yum install -y vixie-cron crontabs</code></p></li><li><p>Ubuntu：<code>sudo apt-get install -y cron</code></p></li><li><p>服务常用命令</p><ul><li>CentOS 6 <ul><li><code>service crond start</code> 启动服务</li><li><code>service crond stop</code> 关闭服务</li><li><code>service crond restart</code> 重启服务</li></ul></li><li>CentOS 7 <ul><li><code>systemctl start crond</code> 启动服务</li><li><code>systemctl restart crond</code> 重新启动服务</li><li><code>systemctl status crond</code> 加入自启动</li><li><code>systemctl stop crond</code> 关闭服务</li></ul></li></ul></li></ul><h2 id="crontab-服务器配置文件常用参数" tabindex="-1"><a class="header-anchor" href="#crontab-服务器配置文件常用参数"><span>Crontab 服务器配置文件常用参数</span></a></h2><ul><li>配置文件介绍（记得先备份）：<code>sudo vim /etc/crontab</code></li><li>注意：不要在配置文件里面写相对路径</li><li>该配置格式解释：</li><li>常用例子介绍： <ul><li><code>30 21 * * * service httpd restart</code> #每晚的 21:30 重启 apache</li><li><code>30 21 * * 6,0 service httpd restart</code> #每周六、周日的 21:30 重启 apache</li><li><code>45 4 1,10,22 * * service httpd restart</code> #每月的 1、10、22 日的 4:45 重启 apache</li><li><code>45 4 1-10 * * service httpd restart</code> #每月的 1 到 10 日的 4:45 重启 apache</li><li><code>*/2 * * * * service httpd restart</code> #每隔两分钟重启 apache</li><li><code>1-59/2 * * * * service httpd restart</code> #每隔两分钟重启 apache（这个比较特殊：1-59/2 这个表示过掉0分，从 1 分开始算，每隔两分执行，所以 1 分执行了，3 分执行了，5 分执行了....都是奇数进行执行。默认的 */2 都是偶数执行。）</li><li><code>* */2 * * * service httpd restart</code> #每隔两小时重启 apache</li><li><code>0 23-7/2 * * * service httpd restart</code> #晚上 11 点到早上 7 点之间，每隔 2 个小时重启 apache</li><li><code>0-59/30 18-23 * * * service httpd restart</code> #每天 18:00 到 23：00 之间，每隔 30 分钟重启 apache（方法一）</li><li><code>0,30 18-23 * * * service httpd restart</code> #每天 18:00 到 23：00 之间，每隔 30 分钟重启 apache（方法二）</li><li><code>0 4 * * sun root /opt/shell/crontab-redis-restart.sh</code> #每周日 4:00 执行一个脚本（root 用户运行，有些脚本不指定用户会报：ERROR (getpwnam() failed）</li></ul></li><li>更多例子可以看：<a href="http://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/crontab.html" target="_blank" rel="noopener noreferrer">http://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/crontab.html</a></li><li>执行记录日志：<code>tail -f /var/log/cron</code>（如果发现任务不执行，可以来这里盯着日志看）</li></ul><h2 id="crontab-权限问题" tabindex="-1"><a class="header-anchor" href="#crontab-权限问题"><span>Crontab 权限问题</span></a></h2><ul><li>一般默认只有 root 用户可以使用</li><li>如果要指定某个用户可以使用，可以在 /etc/cron.allow 添加（不存在文件就创建一个）</li><li>如果要指定某个用户不可以使用，可以在 /etc/cron.deny 添加（不存在文件就创建一个）</li><li>如果一个用户同时在两个文件都存在，那则以 allow 为准</li></ul><h2 id="crontab-不执行" tabindex="-1"><a class="header-anchor" href="#crontab-不执行"><span>Crontab 不执行</span></a></h2><ul><li>Crontab 不执行原因有很多，可以 Google 搜索：<code>Crontab 不执行</code>，这里不多说。</li></ul><h2 id="crontab-资料" tabindex="-1"><a class="header-anchor" href="#crontab-资料"><span>Crontab 资料</span></a></h2><ul><li><a href="http://www.imooc.com/video/4498" target="_blank" rel="noopener noreferrer">http://www.imooc.com/video/4498</a></li><li><a href="http://www.centoscn.com/image-text/config/2015/0901/6096.html" target="_blank" rel="noopener noreferrer">http://www.centoscn.com/image-text/config/2015/0901/6096.html</a></li></ul>',11)])])}const d=t(c,[["render",i]]),s=JSON.parse('{"path":"/linux-tutor/server/Crontab.html","title":"Crontab 介绍","lang":"zh-CN","frontmatter":{"description":"Crontab 介绍 Crontab 安装 查看是否已安装： CentOS：rpm -qa | grep cron Ubuntu：dpkg -l | grep cron 安装（一般系统是集成的）： CentOS 6 / 7：sudo yum install -y vixie-cron crontabs Ubuntu：sudo apt-get insta...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Crontab 介绍\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2022-07-26T16:41:58.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"yzqdev\\",\\"url\\":\\"http://www.yzqdev.top\\"}]}"],["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/linux-tutor/server/Crontab.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"Crontab 介绍"}],["meta",{"property":"og:description","content":"Crontab 介绍 Crontab 安装 查看是否已安装： CentOS：rpm -qa | grep cron Ubuntu：dpkg -l | grep cron 安装（一般系统是集成的）： CentOS 6 / 7：sudo yum install -y vixie-cron crontabs Ubuntu：sudo apt-get insta..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2022-07-26T16:41:58.000Z"}],["meta",{"property":"article:modified_time","content":"2022-07-26T16:41:58.000Z"}]]},"git":{"createdTime":1653565176000,"updatedTime":1658853718000,"contributors":[{"name":"yzqdev","username":"yzqdev","email":"yzqdev@outlook.com","commits":3,"url":"https://github.com/yzqdev"}]},"readingTime":{"minutes":2.1,"words":630},"filePathRelative":"linux-tutor/server/Crontab.md","autoDesc":true}');export{d as comp,s as data};
