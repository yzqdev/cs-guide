import{_ as n,c as a,a as p,o as e}from"./app-B6vXTniy.js";const t={};function l(o,s){return e(),a("div",null,[...s[0]||(s[0]=[p(`<h1 id="webpack5教程" tabindex="-1"><a class="header-anchor" href="#webpack5教程"><span>webpack5教程</span></a></h1><h2 id="热部署" tabindex="-1"><a class="header-anchor" href="#热部署"><span>热部署</span></a></h2><h3 id="webpack-s-watch-mode" tabindex="-1"><a class="header-anchor" href="#webpack-s-watch-mode"><span>webpack&#39;s Watch Mode</span></a></h3><p>​</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token string">&quot;watch&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;webpack --watch&quot;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>自动编译模块!!! 唯一的缺点是，为了看到修改后的实际效果，你需要刷新浏览器。如果能够自动刷新浏览器就更好了，可以尝试使用 webpack-dev-server，恰好可以实现我们想要的功能。</p><h3 id="webpack-dev-server" tabindex="-1"><a class="header-anchor" href="#webpack-dev-server"><span>webpack-dev-server</span></a></h3><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token string-property property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack serve --open&quot;</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line"># 配置如下</span>
<span class="line"> <span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">  <span class="token keyword">const</span> CleanWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;clean-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">print</span><span class="token operator">:</span> <span class="token string">&#39;./src/print.js&#39;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token string">&#39;inline-source-map&#39;</span><span class="token punctuation">,</span></span>
<span class="line">   <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">     <span class="token literal-property property">contentBase</span><span class="token operator">:</span> <span class="token string">&#39;./dist&#39;</span></span>
<span class="line">   <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;dist&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;Development&#39;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;[name].bundle.js&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">现在，我们可以在命令行中运行 npm start，就会看到浏览器自动加载页面。如果现在修改和保存任意源文件，web 服务器就会自动重新加载编译后的代码。试一下</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="webpack-dev-middlewara" tabindex="-1"><a class="header-anchor" href="#webpack-dev-middlewara"><span>webpack-dev-middlewara</span></a></h3><p>搭配express进行热部署,地址 <a href="https://www.webpackjs.com/guides/development/#%E4%BD%BF%E7%94%A8-webpack-dev-middleware" target="_blank" rel="noopener noreferrer">webpack配置express</a></p><h2 id="webpack5配置" tabindex="-1"><a class="header-anchor" href="#webpack5配置"><span>webpack5配置</span></a></h2><ol><li><code>Error: Cannot find module &#39;webpack-cli/bin/config-yargs&#39;</code></li></ol><p>在<code>webpack-cli 4.x</code>中，不能过<code>webpack-dev-server</code>启动项目了，需要通过<code>webpack serve...</code>或者修改<code>webpack-cli</code>版本改为3.x</p><div class="language-json" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line">  <span class="token comment">// package.json</span></span>
<span class="line">  <span class="token comment">// webpack4.x</span></span>
<span class="line">  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack-dev-server ...&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// webpack5.x</span></span>
<span class="line">  <span class="token property">&quot;script&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack serve ...&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// 降版本</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    webpack-cli@<span class="token number">3.3</span>.<span class="token number">12</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><ol><li><code>webpack5</code>中错误出现错误<code>UnhandledPromiseRejectionWarning: TypeError: webpack.NamedModulesPlugin is not a constructor</code></li></ol><div class="language-java" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line">  <span class="token comment">// webpack.config.js</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// webpack4.x</span></span>
<span class="line">  <span class="token keyword">module</span><span class="token punctuation">.</span><span class="token keyword">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    plugins<span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">      <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">webpack<span class="token punctuation">.</span></span>NamedModulesPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// webpack5.x</span></span>
<span class="line">  <span class="token comment">// 在webpack5.x中，webpack.NamedModulesPlugin的功能已经内置</span></span>
<span class="line"></span></code></pre></div><ol><li>babel配置导致的文件引入错误，<code>@babel/runtime</code></li></ol><p>在webpack5.x中，发现很多关于<code>@babel/runtime/helpers/esm</code>的文件引入错误，错误提示类似下面，通过锁定@babel/runtime包版本即可</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line">Module not found: Error: Can<span class="token string">&#39;t resolve &#39;</span>./superPropBase<span class="token string">&#39; in &#39;</span>/Users/xxx/node_modules/@babel/runtime/helpers/esm<span class="token string">&#39;</span>
<span class="line">Did you mean &#39;</span>superPropBase.js<span class="token string">&#39;?</span>
<span class="line">BREAKING CHANGE: The request &#39;</span>./superPropBase<span class="token string">&#39; failed to resolve only because it was resolved as fully specified</span>
<span class="line">(probably because the origin is a &#39;</span>*.mjs<span class="token string">&#39; file or a &#39;</span>*.js<span class="token string">&#39; file where the package.json contains &#39;</span><span class="token string">&quot;type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;module&quot;</span>&#39;<span class="token punctuation">)</span>.</span>
<span class="line">The extension <span class="token keyword">in</span> the request is mandatory <span class="token keyword">for</span> it to be fully specified.</span>
<span class="line">Add the extension to the request</span>
<span class="line">  <span class="token function">npm</span> <span class="token function">install</span> @babel/runtime@7.12.0 <span class="token parameter variable">-D</span></span>
<span class="line"></span></code></pre></div><ol><li><code>webpack &lt; 5 used to include polyfills for node.js core modules by default</code></li></ol><p>在运行过程中出现了很多这样的报错信息，是由于在webpack5中移除了nodejs核心模块的polyfill自动引入，所以需要手动引入，如果打包过程中有使用到nodejs核心模块，webpack会提示进行相应配置</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">  <span class="token comment">// webpack.config.js</span></span>
<span class="line">  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token operator">...</span></span>
<span class="line">    <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// https://github.com/babel/babel/issues/8462</span></span>
<span class="line">      <span class="token comment">// https://blog.csdn.net/qq_39807732/article/details/110089893</span></span>
<span class="line">      <span class="token comment">// 如果确认需要node polyfill，设置resolve.fallback安装对应的依赖</span></span>
<span class="line">      <span class="token literal-property property">fallback</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">crypto</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;crypto-browserify&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">path</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;path-browserify&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">url</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;url&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">buffer</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;buffer/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">util</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;util/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">stream</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;stream-browserify/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">vm</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;vm-browserify&#39;</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">// 如果确认不需要node polyfill，设置resolve.alias设置为false</span></span>
<span class="line">      <span class="token literal-property property">alias</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">crypto</span><span class="token operator">:</span> <span class="token boolean">false</span></span>
<span class="line">      <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果实在<code>vue-cli</code>中,需要这样</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">configureWebpack</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token literal-property property">fallback</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">path</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;path-browserify&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"></span>
<span class="line">  <span class="token literal-property property">transpileDependencies</span><span class="token operator">:</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><ol><li>DeprecationWarning: Compilation.assets will be frozen in future, all modifications are deprecated. BREAKING CHANGE: No more changes should happen to Compilation.assets after sealing the Compilation. Do changes to assets earlier, e. g. in Compilation.hooks.processAssets. Mak\`e sure to select an appropriate stage from Compilation.PROCESS_ASSETS_STAGE_*.</li></ol><p>为<code>html-webpack-plugin</code>这个包导致的⚠️信息，<a href="https://github.com/webpack/webpack/issues/11997" target="_blank" rel="noopener noreferrer">github issue</a></p><div class="language-css" data-highlighter="prismjs" data-ext="css"><pre><code class="language-css"><span class="line">  npm run html-webpack-plugin@next -D</span>
<span class="line"></span></code></pre></div><ol><li>DeprecationWarning: A &#39;callback&#39; argument need to be provided to the &#39;webpack(options, callback)&#39; function when the &#39;watch&#39; option is set. There is no way to handle the &#39;watch&#39; option without a callback</li></ol><p>官方给出的问题原因是<code>webpack-cli</code>这个包的版本导致的，<a href="https://github.com/webpack/webpack-cli/issues/1918" target="_blank" rel="noopener noreferrer">github issue</a></p><div class="language-avrasm" data-highlighter="prismjs" data-ext="avrasm"><pre><code class="language-avrasm"><span class="line">  // 官方提供的解决方式，修改webpack-cli版本到4.2.0既可</span>
<span class="line">  npm install webpack-cli@4.2.0 --save-dev</span>
<span class="line"></span></code></pre></div><p>不过我在本地创建了一个新的项目，版本信息如下，还是存在上面的那个报错信息，demo地址<a href="https://github.com/xccjk/webpack-demo1" target="_blank" rel="noopener noreferrer">github issue</a></p><div class="language-json" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line">  <span class="token property">&quot;webpack&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.10.3&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;webpack-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.2.0&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;webpack-dev-server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.11.0&quot;</span></span>
<span class="line"></span></code></pre></div><ol><li>业务插件遇到的问题，<code>webpack-merge</code>包遇到的问题</li></ol><p><a href="https://blog.csdn.net/lzc2644481789/article/details/107814848" target="_blank" rel="noopener noreferrer">csdn资料</a></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">  <span class="token comment">// 4.x版本</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;webpack-merge&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.2.2&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// webpack.config.js</span></span>
<span class="line">  <span class="token keyword">const</span> merge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-merge&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">const</span> defaultConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../...&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">merge</span><span class="token punctuation">(</span>defaultConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">export</span> <span class="token keyword">default</span> config</span>
<span class="line"></span>
<span class="line">  <span class="token comment">// 5.x版本</span></span>
<span class="line">  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token string-property property">&quot;webpack-merge&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^5.7.0&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token keyword">const</span> webpackMerge <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-merge&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">const</span> defaultConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;../...&#39;</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">const</span> config <span class="token operator">=</span> webpackMerge<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>defaultConfig<span class="token punctuation">,</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">export</span> <span class="token keyword">default</span> config</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>数据流工具<code>recoil</code>好像还不支持在webpack中使用，我们项目里有使用recoil，配置了babel后，一直提示<code>You may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders</code></li></ol><p>官方答复：<a href="https://github.com/facebookexperimental/Recoil/pull/467" target="_blank" rel="noopener noreferrer">guthub issue</a></p><ol><li><code>TypeError: Cannot read property &#39;tap&#39; of undefined</code></li></ol><p><code>hard-source-webpack-plugin</code>这个包在版本升级后出现错误，<a href="https://github.com/mzgoddard/hard-source-webpack-plugin/issues/461" target="_blank" rel="noopener noreferrer">github issue</a></p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line">  <span class="token comment">// webpack.config.js</span></span>
<span class="line">  <span class="token comment">// webpack4.x</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token class-name">HardSourceWebpackPlugin</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>&#39;hard<span class="token operator">-</span>source<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin&#39;<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">module</span><span class="token punctuation">.</span><span class="token keyword">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    piugins<span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token keyword">new</span> <span class="token class-name">HardSourceWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">        environmentHash<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          root<span class="token operator">:</span> process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">          directories<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">          files<span class="token operator">:</span> <span class="token punctuation">[</span>&#39;<span class="token keyword">package</span><span class="token operator">-</span>lock<span class="token punctuation">.</span>json<span class="token char">&#39;, &#39;</span>yarn<span class="token punctuation">.</span>lock&#39;<span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">        cachePrune<span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">          maxAge<span class="token operator">:</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span></span>
<span class="line">          sizeThreshold<span class="token operator">:</span> <span class="token number">50</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line">  <span class="token comment">// webpack5.x</span></span>
<span class="line">  <span class="token comment">// https://github.com/mzgoddard/hard-source-webpack-plugin/issues/461</span></span>
<span class="line">  <span class="token keyword">const</span> <span class="token class-name">HardSourceWebpackPlugin</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>&#39;hard<span class="token operator">-</span>source<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin&#39;<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">module</span><span class="token punctuation">.</span><span class="token keyword">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    piugins<span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token keyword">new</span> <span class="token class-name">HardSourceWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token keyword">new</span> <span class="token class-name">HardSourceWebpackPlugin<span class="token punctuation">.</span>ExcludeModulePlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,40)])])}const i=n(t,[["render",l]]),r=JSON.parse(`{"path":"/frontend/framework/packaging-tool/webpack5-upgrade.html","title":"webpack5教程","lang":"zh-CN","frontmatter":{"description":"webpack5教程 热部署 webpack's Watch Mode ​ 自动编译模块!!! 唯一的缺点是，为了看到修改后的实际效果，你需要刷新浏览器。如果能够自动刷新浏览器就更好了，可以尝试使用 webpack-dev-server，恰好可以实现我们想要的功能。 webpack-dev-server webpack-dev-middlewara 搭...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"webpack5教程\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-11-04T19:25:57.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"yzqdev\\",\\"url\\":\\"http://www.yzqdev.top\\"}]}"],["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/frontend/framework/packaging-tool/webpack5-upgrade.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"webpack5教程"}],["meta",{"property":"og:description","content":"webpack5教程 热部署 webpack's Watch Mode ​ 自动编译模块!!! 唯一的缺点是，为了看到修改后的实际效果，你需要刷新浏览器。如果能够自动刷新浏览器就更好了，可以尝试使用 webpack-dev-server，恰好可以实现我们想要的功能。 webpack-dev-server webpack-dev-middlewara 搭..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-11-04T19:25:57.000Z"}],["meta",{"property":"article:modified_time","content":"2023-11-04T19:25:57.000Z"}]]},"git":{"createdTime":1647861419000,"updatedTime":1699125957000,"contributors":[{"name":"yzqdev","username":"yzqdev","email":"yzqdev@outlook.com","commits":9,"url":"https://github.com/yzqdev"}]},"readingTime":{"minutes":3.61,"words":1082},"filePathRelative":"frontend/framework/packaging-tool/webpack5-upgrade.md","autoDesc":true}`);export{i as comp,r as data};
