import{_ as n,c as s,a as p,o as t}from"./app-C8DxhDIZ.js";const e={};function o(i,a){return t(),s("div",null,a[0]||(a[0]=[p(`<h1 id="mongodb设置密码" tabindex="-1"><a class="header-anchor" href="#mongodb设置密码"><span>mongodb设置密码</span></a></h1><h2 id="超级管理员" tabindex="-1"><a class="header-anchor" href="#超级管理员"><span>超级管理员</span></a></h2><h3 id="设置-admin" tabindex="-1"><a class="header-anchor" href="#设置-admin"><span>设置 admin</span></a></h3><div class="language-javascript" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">use admin  </span>
<span class="line">db<span class="token punctuation">.</span><span class="token function">createUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 用户名</span></span>
<span class="line">  <span class="token literal-property property">pwd</span><span class="token operator">:</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 密码</span></span>
<span class="line">  <span class="token literal-property property">roles</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">role</span><span class="token operator">:</span> <span class="token string">&#39;root&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 角色</span></span>
<span class="line">    <span class="token literal-property property">db</span><span class="token operator">:</span> <span class="token string">&#39;admin&#39;</span>  <span class="token comment">// 数据库</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><p>设置完成，可以输入 <code>show users</code> 查看是否设置成功。</p><h3 id="开启验证" tabindex="-1"><a class="header-anchor" href="#开启验证"><span>开启验证</span></a></h3><p>找到 MongoDB 安装目录，打开 <code>mongod.cfg</code>文件，找到以下这句：</p><div class="language-python" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line"><span class="token comment">#security:</span></span>
<span class="line"></span></code></pre></div><p>修改为：</p><div class="language-python" data-highlighter="prismjs" data-ext="py" data-title="py"><pre><code><span class="line">security<span class="token punctuation">:</span></span>
<span class="line">  authorization<span class="token punctuation">:</span> enabled</span>
<span class="line"></span></code></pre></div><h3 id="重启-mongodb" tabindex="-1"><a class="header-anchor" href="#重启-mongodb"><span>重启 MongoDB</span></a></h3><p>打开任务管理器</p><p><img src="https://upload-images.jianshu.io/upload_images/1128764-564fe60c63ce951b.jpg?imageMogr2/auto-orient/strip|imageView2/2/w/788/format/webp#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=LnrTq&amp;originHeight=600&amp;originWidth=788&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>任务管理器界面</p><p>找到 MongoDB 服务，右键重新启动。</p><p>这时，我们可以打开 powershell 连接数据库：</p><p>输入 mongo：</p><p><img src="https://upload-images.jianshu.io/upload_images/1128764-08b60c7bdc8e9010.jpg?imageMogr2/auto-orient/strip|imageView2/2/w/657/format/webp#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=TACUi&amp;originHeight=84&amp;originWidth=657&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>截图</p><p>显示连接成功，但是当我们输入其他指令时，会提示没有权限：</p><p><img src="https://upload-images.jianshu.io/upload_images/1128764-5b9c49021375919b.jpg?imageMogr2/auto-orient/strip|imageView2/2/w/622/format/webp#crop=0&amp;crop=0&amp;crop=1&amp;crop=1&amp;id=wR9q5&amp;originHeight=218&amp;originWidth=622&amp;originalType=binary&amp;ratio=1&amp;rotation=0&amp;showTitle=false&amp;status=done&amp;style=none&amp;title=" alt=""></p><p>截图</p><h3 id="登录数据库" tabindex="-1"><a class="header-anchor" href="#登录数据库"><span>登录数据库</span></a></h3><div class="language-javascript" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token comment">// 方式一</span></span>
<span class="line">mongo</span>
<span class="line">use admin</span>
<span class="line">db<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 方式二</span></span>
<span class="line">mongo admin <span class="token operator">-</span>u admin <span class="token operator">-</span>p <span class="token number">123456</span></span>
<span class="line"></span></code></pre></div><p>这时候我们就可以正常访问和操作数据了。</p><h2 id="添加数据库用户" tabindex="-1"><a class="header-anchor" href="#添加数据库用户"><span>添加数据库用户</span></a></h2><p>我们除了可以设置数据库的超级管理员以外，还可以给每个数据库设置单独的管理员。其只有操作单独数据的一定权限。</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">use test  <span class="token comment">// 跳转到需要添加用户的数据库</span></span>
<span class="line">db<span class="token punctuation">.</span><span class="token function">createUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&#39;fooadmin&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 用户名</span></span>
<span class="line">  <span class="token literal-property property">pwd</span><span class="token operator">:</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 密码</span></span>
<span class="line">  <span class="token literal-property property">roles</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">role</span><span class="token operator">:</span> <span class="token string">&#39;readWrite&#39;</span><span class="token punctuation">,</span>  <span class="token comment">// 角色</span></span>
<span class="line">    <span class="token literal-property property">db</span><span class="token operator">:</span> <span class="token string">&#39;test&#39;</span>  <span class="token comment">// 数据库名</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><h2 id="常用命令" tabindex="-1"><a class="header-anchor" href="#常用命令"><span>常用命令</span></a></h2><div class="language-javascript" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line">show users  <span class="token comment">// 查看当前库下的用户</span></span>
<span class="line"></span>
<span class="line">db<span class="token punctuation">.</span><span class="token function">dropUser</span><span class="token punctuation">(</span><span class="token string">&#39;testadmin&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 删除用户</span></span>
<span class="line"></span>
<span class="line">db<span class="token punctuation">.</span><span class="token function">updateUser</span><span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">pwd</span><span class="token operator">:</span> <span class="token string">&#39;654321&#39;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// 修改用户密码</span></span>
<span class="line"></span>
<span class="line">db<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;654321&#39;</span><span class="token punctuation">)</span>  <span class="token comment">// 密码认证</span></span>
<span class="line"></span></code></pre></div><h2 id="mongodb-数据库默认角色" tabindex="-1"><a class="header-anchor" href="#mongodb-数据库默认角色"><span>MongoDB 数据库默认角色</span></a></h2><ol><li>数据库用户角色：read、readWrite</li><li>数据库管理角色：dbAdmin、dbOwner、userAdmin</li><li>集群管理角色：clusterAdmin、clusterManager、clusterMonitor、hostManager</li><li>备份恢复角色：backup、restore</li><li>所有数据库角色： readAnyDatabase、readWriteAnyDatabase、userAdminAnyDatabase、 dbAdminAnyDatabase</li><li>超级用户角色：root</li></ol>`,32)]))}const r=n(e,[["render",o]]),c=JSON.parse('{"path":"/java-tutor/server-config/set-mongodb-password.html","title":"mongodb设置密码","lang":"zh-CN","frontmatter":{"description":"mongodb设置密码 超级管理员 设置 admin 设置完成，可以输入 show users 查看是否设置成功。 开启验证 找到 MongoDB 安装目录，打开 mongod.cfg文件，找到以下这句： 修改为： 重启 MongoDB 打开任务管理器 任务管理器界面 找到 MongoDB 服务，右键重新启动。 这时，我们可以打开 powershell...","head":[["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/java-tutor/server-config/set-mongodb-password.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"mongodb设置密码"}],["meta",{"property":"og:description","content":"mongodb设置密码 超级管理员 设置 admin 设置完成，可以输入 show users 查看是否设置成功。 开启验证 找到 MongoDB 安装目录，打开 mongod.cfg文件，找到以下这句： 修改为： 重启 MongoDB 打开任务管理器 任务管理器界面 找到 MongoDB 服务，右键重新启动。 这时，我们可以打开 powershell..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://upload-images.jianshu.io/upload_images/1128764-564fe60c63ce951b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/788/format/webp#crop=0&crop=0&crop=1&crop=1&id=LnrTq&originHeight=600&originWidth=788&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title="}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2022-04-05T13:45:58.000Z"}],["meta",{"property":"article:modified_time","content":"2022-04-05T13:45:58.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"mongodb设置密码\\",\\"image\\":[\\"https://upload-images.jianshu.io/upload_images/1128764-564fe60c63ce951b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/788/format/webp#crop=0&crop=0&crop=1&crop=1&id=LnrTq&originHeight=600&originWidth=788&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=\\",\\"https://upload-images.jianshu.io/upload_images/1128764-08b60c7bdc8e9010.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/657/format/webp#crop=0&crop=0&crop=1&crop=1&id=TACUi&originHeight=84&originWidth=657&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=\\",\\"https://upload-images.jianshu.io/upload_images/1128764-5b9c49021375919b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/622/format/webp#crop=0&crop=0&crop=1&crop=1&id=wR9q5&originHeight=218&originWidth=622&originalType=binary&ratio=1&rotation=0&showTitle=false&status=done&style=none&title=\\"],\\"dateModified\\":\\"2022-04-05T13:45:58.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"yzqdev\\",\\"url\\":\\"http://www.yzqdev.top\\"}]}"]]},"headers":[{"level":2,"title":"超级管理员","slug":"超级管理员","link":"#超级管理员","children":[{"level":3,"title":"设置 admin","slug":"设置-admin","link":"#设置-admin","children":[]},{"level":3,"title":"开启验证","slug":"开启验证","link":"#开启验证","children":[]},{"level":3,"title":"重启 MongoDB","slug":"重启-mongodb","link":"#重启-mongodb","children":[]},{"level":3,"title":"登录数据库","slug":"登录数据库","link":"#登录数据库","children":[]}]},{"level":2,"title":"添加数据库用户","slug":"添加数据库用户","link":"#添加数据库用户","children":[]},{"level":2,"title":"常用命令","slug":"常用命令","link":"#常用命令","children":[]},{"level":2,"title":"MongoDB 数据库默认角色","slug":"mongodb-数据库默认角色","link":"#mongodb-数据库默认角色","children":[]}],"git":{"createdTime":1647861419000,"updatedTime":1649166358000,"contributors":[{"name":"yzqdev","username":"yzqdev","email":"yzqdev@outlook.com","commits":3,"url":"https://github.com/yzqdev"}]},"readingTime":{"minutes":1.73,"words":520},"filePathRelative":"java-tutor/server-config/set-mongodb-password.md","localizedDate":"2022年3月21日","autoDesc":true}');export{r as comp,c as data};
