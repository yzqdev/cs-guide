import{_ as s,c as a,a as p,o as t}from"./app-B6vXTniy.js";const e={};function c(o,n){return t(),a("div",null,[...n[0]||(n[0]=[p(`<h1 id="安卓已经弃用的" tabindex="-1"><a class="header-anchor" href="#安卓已经弃用的"><span>安卓已经弃用的</span></a></h1><h2 id="getdrawable-int-id" tabindex="-1"><a class="header-anchor" href="#getdrawable-int-id"><span><code>getDrawable(int id)</code></span></a></h2><p>虽然getDrawable(int id)已经废弃了，但是依旧还是可以用的。</p><p>如果你的Android版本比较高，那就按照官方的提示，可以使用<code>getDrawable(int, Theme)</code>替代。 使用drawable资源但不为其设置theme主题</p><div class="language-java" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">ResourcesCompat</span><span class="token punctuation">.</span><span class="token function">getDrawable</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>使用默认的activity主题</p><div class="language-java" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">ContextCompat</span><span class="token punctuation">.</span><span class="token function">getDrawable</span><span class="token punctuation">(</span><span class="token function">getActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>使用自定义主题</p><div class="language-java" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"></span>
<span class="line"><span class="token class-name">ResourcesCompat</span><span class="token punctuation">.</span><span class="token function">getDrawable</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">R</span><span class="token punctuation">.</span>drawable<span class="token punctuation">.</span>name<span class="token punctuation">,</span> anotherTheme<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>为了兼容,可以使用</p><div class="language-java" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Build</span><span class="token punctuation">.</span><span class="token constant">VERSION</span><span class="token punctuation">.</span><span class="token constant">SDK_INT</span> <span class="token operator">&gt;=</span> <span class="token class-name">Build</span><span class="token punctuation">.</span><span class="token constant">VERSION_CODES</span><span class="token punctuation">.</span><span class="token constant">LOLLIPOP</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> resources<span class="token punctuation">.</span><span class="token function">getDrawable</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> context<span class="token punctuation">.</span><span class="token function">getTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> resources<span class="token punctuation">.</span><span class="token function">getDrawable</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h2 id="onbackpress" tabindex="-1"><a class="header-anchor" href="#onbackpress"><span>onBackPress</span></a></h2><div class="language-kotlin" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">  <span class="token annotation builtin">@Deprecated</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Deprecated in Java&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onBackPressed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>mTag <span class="token operator">!=</span> <span class="token string-literal singleline"><span class="token string">&quot;activity_constraint&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            mTag <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;activity_constraint&quot;</span></span></span>
<span class="line">            <span class="token function">setContentView</span><span class="token punctuation">(</span>mTag<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onBackPressed</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>替代</p><div class="language-kotlin" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"></span>
<span class="line"># 在onCreate里面</span>
<span class="line">onBackPressedDispatcher<span class="token punctuation">.</span><span class="token function">addCallback</span><span class="token punctuation">(</span><span class="token keyword">object</span><span class="token operator">:</span> <span class="token function">OnBackPressedCallback</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">handleOnBackPressed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                <span class="token keyword">if</span> <span class="token punctuation">(</span>mTag <span class="token operator">!=</span> <span class="token string-literal singleline"><span class="token string">&quot;activity_constraint&quot;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">                    mTag <span class="token operator">=</span> <span class="token string-literal singleline"><span class="token string">&quot;activity_constraint&quot;</span></span></span>
<span class="line">                    <span class="token function">setContentView</span><span class="token punctuation">(</span>mTag<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">                    </span>
<span class="line">                <span class="token punctuation">}</span></span>
<span class="line">            <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h2 id="创建menu" tabindex="-1"><a class="header-anchor" href="#创建menu"><span>创建menu</span></a></h2><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">class</span> Activity<span class="token punctuation">{</span></span>
<span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateOptionsMenu</span><span class="token punctuation">(</span>menu<span class="token operator">:</span> Menu<span class="token punctuation">,</span> inflater<span class="token operator">:</span> MenuInflater<span class="token punctuation">)</span> <span class="token punctuation">{</span>  </span>
<span class="line">    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreateOptionsMenu</span><span class="token punctuation">(</span>menu<span class="token punctuation">,</span> inflater<span class="token punctuation">)</span>  </span>
<span class="line">    inflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>menu<span class="token punctuation">.</span>menu<span class="token punctuation">,</span> menu<span class="token punctuation">)</span>  </span>
<span class="line"><span class="token punctuation">}</span>  </span>
<span class="line">  </span>
<span class="line"><span class="token annotation builtin">@Deprecated</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;Deprecated in Java&quot;</span></span><span class="token punctuation">)</span>  </span>
<span class="line"><span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onOptionsItemSelected</span><span class="token punctuation">(</span>item<span class="token operator">:</span> MenuItem<span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token punctuation">{</span>  </span>
<span class="line">    <span class="token keyword">when</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>itemId<span class="token punctuation">)</span> <span class="token punctuation">{</span>  </span>
<span class="line">        R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>get <span class="token operator">-&gt;</span> <span class="token function">GET</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line">    </span>
<span class="line">    <span class="token punctuation">}</span>  </span>
<span class="line">    <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onOptionsItemSelected</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>  </span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>替代为</p><div class="language-kotlin line-numbers-mode" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line"><span class="token keyword">class</span> Fragment<span class="token punctuation">{</span></span>
<span class="line">   <span class="token keyword">fun</span> <span class="token function">onViewCreated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line">   <span class="token function">requireActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addMenuProvider</span><span class="token punctuation">(</span><span class="token keyword">object</span> <span class="token operator">:</span>MenuProvider<span class="token punctuation">{</span>  </span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreateMenu</span><span class="token punctuation">(</span>menu<span class="token operator">:</span> Menu<span class="token punctuation">,</span> menuInflater<span class="token operator">:</span> MenuInflater<span class="token punctuation">)</span> <span class="token punctuation">{</span>  </span>
<span class="line">       menuInflater<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>menu<span class="token punctuation">.</span>menu_request_method<span class="token punctuation">,</span> menu<span class="token punctuation">)</span>  </span>
<span class="line">    <span class="token punctuation">}</span>  </span>
<span class="line">  </span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onMenuItemSelected</span><span class="token punctuation">(</span>menuItem<span class="token operator">:</span> MenuItem<span class="token punctuation">)</span><span class="token operator">:</span> Boolean <span class="token punctuation">{</span>  </span>
<span class="line">        <span class="token keyword">when</span> <span class="token punctuation">(</span>menuItem<span class="token punctuation">.</span>itemId<span class="token punctuation">)</span> <span class="token punctuation">{</span>  </span>
<span class="line">            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>get <span class="token operator">-&gt;</span> <span class="token function">GET</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line">            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>post <span class="token operator">-&gt;</span> <span class="token function">POST</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line">            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>head <span class="token operator">-&gt;</span> <span class="token function">HEAD</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line">            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>trace <span class="token operator">-&gt;</span> <span class="token function">TRACE</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line">            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>options <span class="token operator">-&gt;</span> <span class="token function">OPTIONS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line">            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>delete <span class="token operator">-&gt;</span> <span class="token function">DELETE</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line">            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>put <span class="token operator">-&gt;</span> <span class="token function">PUT</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line">            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>patch <span class="token operator">-&gt;</span> <span class="token function">PATCH</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line">            R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>json <span class="token operator">-&gt;</span> <span class="token function">JSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  </span>
<span class="line">        <span class="token punctuation">}</span>  </span>
<span class="line">        <span class="token keyword">return</span> <span class="token boolean">true</span>  </span>
<span class="line">    <span class="token punctuation">}</span>  </span>
<span class="line"> <span class="token comment">//下面表示只在当前fragment生效,关闭fragment menu消失</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> viewLifecycleOwner<span class="token punctuation">,</span> Lifecycle<span class="token punctuation">.</span>State<span class="token punctuation">.</span>RESUMED<span class="token punctuation">)</span></span>
<span class="line"> </span>
<span class="line"></span>
<span class="line"></span>
<span class="line">   <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="handler-被弃用" tabindex="-1"><a class="header-anchor" href="#handler-被弃用"><span>handler()被弃用</span></a></h2><h3 id="使用java" tabindex="-1"><a class="header-anchor" href="#使用java"><span>使用java</span></a></h3><div class="language-java" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"> </span>
<span class="line"><span class="token keyword">new</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token class-name">Looper</span><span class="token punctuation">.</span><span class="token function">getMainLooper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">postDelayed</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token annotation punctuation">@Override</span></span>
<span class="line">    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// Your Code</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"> </span>
<span class="line"></span></code></pre></div><h3 id="使用kotlin" tabindex="-1"><a class="header-anchor" href="#使用kotlin"><span>使用kotlin</span></a></h3><div class="language-kotlin" data-highlighter="prismjs" data-ext="kt"><pre><code class="language-kotlin"><span class="line">\`\`\`scss</span>
<span class="line"><span class="token function">Handler</span><span class="token punctuation">(</span>Looper<span class="token punctuation">.</span><span class="token function">getMainLooper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">postDelayed</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Your Code</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre></div><div class="language-text" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line"></span></code></pre></div>`,25)])])}const i=s(e,[["render",c]]),u=JSON.parse('{"path":"/android-tips/android-deprecate.html","title":"安卓已经弃用的","lang":"zh-CN","frontmatter":{"description":"安卓已经弃用的 getDrawable(int id) 虽然getDrawable(int id)已经废弃了，但是依旧还是可以用的。 如果你的Android版本比较高，那就按照官方的提示，可以使用getDrawable(int, Theme)替代。 使用drawable资源但不为其设置theme主题 使用默认的activity主题 使用自定义主题 为了...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"安卓已经弃用的\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-06-25T05:00:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"yzqdev\\",\\"url\\":\\"http://www.yzqdev.top\\"}]}"],["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/android-tips/android-deprecate.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"安卓已经弃用的"}],["meta",{"property":"og:description","content":"安卓已经弃用的 getDrawable(int id) 虽然getDrawable(int id)已经废弃了，但是依旧还是可以用的。 如果你的Android版本比较高，那就按照官方的提示，可以使用getDrawable(int, Theme)替代。 使用drawable资源但不为其设置theme主题 使用默认的activity主题 使用自定义主题 为了..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-06-25T05:00:38.000Z"}],["meta",{"property":"article:modified_time","content":"2023-06-25T05:00:38.000Z"}]]},"git":{"createdTime":1687669238000,"updatedTime":1687669238000,"contributors":[{"name":"yzqdev","username":"yzqdev","email":"yzqdev@outlook.com","commits":1,"url":"https://github.com/yzqdev"}]},"readingTime":{"minutes":1,"words":301},"filePathRelative":"android-tips/android-deprecate.md","autoDesc":true}');export{i as comp,u as data};
