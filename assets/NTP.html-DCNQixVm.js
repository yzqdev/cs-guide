import{_ as e,c as s,a as l,o as i}from"./app-B6vXTniy.js";const a={};function p(o,n){return i(),s("div",null,[...n[0]||(n[0]=[l(`<h1 id="ntp-network-time-protocol-介绍" tabindex="-1"><a class="header-anchor" href="#ntp-network-time-protocol-介绍"><span>NTP（Network Time Protocol）介绍</span></a></h1><h2 id="ntp-安装" tabindex="-1"><a class="header-anchor" href="#ntp-安装"><span>NTP 安装</span></a></h2><ul><li><p>查看是否已安装：</p></li><li><p>CentOS：<code>rpm -qa | grep ntp-*</code></p></li><li><p>Ubuntu：<code>dpkg -l | grep ntp-*</code></p></li><li><p>安装：</p></li><li><p>CentOS 6/7：<code>sudo yum install -y ntp</code></p></li><li><p>Ubuntu：<code>sudo apt-get install -y ntp</code></p></li></ul><h2 id="配置阿里云-ntp-推荐" tabindex="-1"><a class="header-anchor" href="#配置阿里云-ntp-推荐"><span>配置阿里云 NTP（推荐）</span></a></h2><ul><li>官网介绍：<a href="https://help.aliyun.com/knowledge_detail/40583.html" target="_blank" rel="noopener noreferrer">https://help.aliyun.com/knowledge_detail/40583.html</a></li><li>配置文件介绍（记得先备份）：<code>sudo vim /etc/ntp.conf</code></li><li>注释掉以下默认的配置内容：</li></ul><div class="language-text" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">server 0.centos.pool.ntp.org iburst</span>
<span class="line">server 1.centos.pool.ntp.org iburst</span>
<span class="line">server 2.centos.pool.ntp.org iburst</span>
<span class="line">server 3.centos.pool.ntp.org iburst</span>
<span class="line"></span></code></pre></div><ul><li>新增配置：</li></ul><div class="language-nginx" data-highlighter="prismjs" data-ext="nginx"><pre><code class="language-nginx"><span class="line">ntp1.aliyun.com</span>
<span class="line">ntp2.aliyun.com</span>
<span class="line">ntp3.aliyun.com</span>
<span class="line">ntp4.aliyun.com</span>
<span class="line">ntp5.aliyun.com</span>
<span class="line">ntp6.aliyun.com</span>
<span class="line">ntp7.aliyun.com</span>
<span class="line"></span></code></pre></div><ul><li>CentOS 6 <ul><li>重启 NTP 服务：<code>sudo service ntpd start</code></li><li>添加 NTP 自启动：<code>sudo chkconfig ntpd on</code></li></ul></li><li>CentOS 7 <ul><li>重启 NTP 服务：<code>sudo systemctl start ntpd.service</code></li><li>添加 NTP 自启动：<code>sudo systemctl enable ntpd.service</code></li></ul></li></ul><h2 id="ntp-服务器配置文件常用参数" tabindex="-1"><a class="header-anchor" href="#ntp-服务器配置文件常用参数"><span>NTP 服务器配置文件常用参数</span></a></h2><ul><li><p>世界上可以校对时间节点：<a href="http://www.pool.ntp.org/zh" target="_blank" rel="noopener noreferrer">http://www.pool.ntp.org/zh</a></p></li><li><p>中国时间校对服务器节点：<a href="http://www.pool.ntp.org/zone/cn" target="_blank" rel="noopener noreferrer">http://www.pool.ntp.org/zone/cn</a></p></li><li><p>配置文件介绍（记得先备份）：<code>sudo vim /etc/ntp.conf</code></p></li><li><p>该配置解释：</p></li><li><p>标注 1 是默认内容，我们这里进行了注释。</p></li><li><p>标注 2 是新增内容，表示使用中国时间校对服务器节点地址。</p></li></ul><div class="language-nginx" data-highlighter="prismjs" data-ext="nginx"><pre><code class="language-nginx"><span class="line">server 0.cn.pool.ntp.org</span>
<span class="line">server 1.cn.pool.ntp.org</span>
<span class="line">server 2.cn.pool.ntp.org</span>
<span class="line">server 3.cn.pool.ntp.org</span>
<span class="line"></span></code></pre></div><ul><li>我的配置如下</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">driftfile  /var/lib/ntp/drift</span>
<span class="line">pidfile    /var/run/ntpd.pid</span>
<span class="line">logfile    /var/log/ntp.log</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"># Access Control Support</span>
<span class="line">restrict    default kod nomodify notrap nopeer noquery</span>
<span class="line">restrict -6 default kod nomodify notrap nopeer noquery</span>
<span class="line">restrict 127.0.0.1</span>
<span class="line">restrict 192.168.0.0 mask 255.255.0.0 nomodify notrap nopeer noquery</span>
<span class="line">restrict 172.16.0.0 mask 255.240.0.0 nomodify notrap nopeer noquery</span>
<span class="line">restrict 100.64.0.0 mask 255.192.0.0 nomodify notrap nopeer noquery</span>
<span class="line">restrict 10.0.0.0 mask 255.0.0.0 nomodify notrap nopeer noquery</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"># local clock</span>
<span class="line">server 127.127.1.0</span>
<span class="line">fudge  127.127.1.0 stratum 10</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">restrict ntp1.aliyun.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp1.cloud.aliyuncs.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp10.cloud.aliyuncs.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp11.cloud.aliyuncs.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp12.cloud.aliyuncs.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp2.aliyun.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp2.cloud.aliyuncs.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp3.aliyun.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp3.cloud.aliyuncs.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp4.aliyun.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp4.cloud.aliyuncs.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp5.aliyun.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp5.cloud.aliyuncs.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp6.aliyun.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp6.cloud.aliyuncs.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp7.cloud.aliyuncs.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp8.cloud.aliyuncs.com nomodify notrap nopeer noquery</span>
<span class="line">restrict ntp9.cloud.aliyuncs.com nomodify notrap nopeer noquery</span>
<span class="line"></span>
<span class="line"></span>
<span class="line">server ntp1.aliyun.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp1.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp10.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp11.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp12.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp2.aliyun.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp2.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp3.aliyun.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp3.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp4.aliyun.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp4.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp5.aliyun.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp5.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp6.aliyun.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp6.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp7.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp8.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10</span>
<span class="line">server ntp9.cloud.aliyuncs.com iburst minpoll 4 maxpoll 10</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>启动服务：</p></li><li><p><code>sudo service ntpd stop</code>（改配置后，先停再启动）</p></li><li><p><code>sudo service ntpd start</code></p></li><li><p>手动更新时间：</p></li><li><p><code>sudo ntpdate ntp1.aliyun.com</code></p></li><li><p>服务加到启动项</p><ul><li>CentOS 系统：<code>sudo chkconfig ntpd on</code></li><li>Ubuntu 系统 <ul><li><code>sudo apt-get install -y sysv-rc-conf</code></li><li><code>sudo sysv-rc-conf ntpd on</code></li></ul></li></ul></li></ul><h2 id="ntp-资料" tabindex="-1"><a class="header-anchor" href="#ntp-资料"><span>NTP 资料</span></a></h2><ul><li><a href="http://www.jikexueyuan.com/course/1710.html" target="_blank" rel="noopener noreferrer">http://www.jikexueyuan.com/course/1710.html</a></li><li><a href="http://www.pool.ntp.org/zh" target="_blank" rel="noopener noreferrer">http://www.pool.ntp.org/zh</a></li><li><a href="http://blog.kissdata.com/2014/10/28/ubuntu-ntp.html" target="_blank" rel="noopener noreferrer">http://blog.kissdata.com/2014/10/28/ubuntu-ntp.html</a></li></ul>`,17)])])}const t=e(a,[["render",p]]),c=JSON.parse('{"path":"/linux-tutor/server/NTP.html","title":"NTP（Network Time Protocol）介绍","lang":"zh-CN","frontmatter":{"description":"NTP（Network Time Protocol）介绍 NTP 安装 查看是否已安装： CentOS：rpm -qa | grep ntp-* Ubuntu：dpkg -l | grep ntp-* 安装： CentOS 6/7：sudo yum install -y ntp Ubuntu：sudo apt-get install -y ntp 配置...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"NTP（Network Time Protocol）介绍\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2022-07-26T16:41:58.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"yzqdev\\",\\"url\\":\\"http://www.yzqdev.top\\"}]}"],["meta",{"property":"og:url","content":"https://yzqdev.github.io/cs-guide/cs-guide/linux-tutor/server/NTP.html"}],["meta",{"property":"og:site_name","content":"cs-guide"}],["meta",{"property":"og:title","content":"NTP（Network Time Protocol）介绍"}],["meta",{"property":"og:description","content":"NTP（Network Time Protocol）介绍 NTP 安装 查看是否已安装： CentOS：rpm -qa | grep ntp-* Ubuntu：dpkg -l | grep ntp-* 安装： CentOS 6/7：sudo yum install -y ntp Ubuntu：sudo apt-get install -y ntp 配置..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2022-07-26T16:41:58.000Z"}],["meta",{"property":"article:modified_time","content":"2022-07-26T16:41:58.000Z"}]]},"git":{"createdTime":1653565176000,"updatedTime":1658853718000,"contributors":[{"name":"yzqdev","username":"yzqdev","email":"yzqdev@outlook.com","commits":3,"url":"https://github.com/yzqdev"}]},"readingTime":{"minutes":2.11,"words":633},"filePathRelative":"linux-tutor/server/NTP.md","autoDesc":true}');export{t as comp,c as data};
