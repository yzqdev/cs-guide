# size 查看程序内存映像大小 {#size}

作用：查看程序被映射到内存中的映像所占用的大小信息。

程序映射到内存中，从低地址到高地址依次为下列段:

-   代码段： 只读，可共享; 代码段（code segment/text segment
    ）通常是指用来存放程序执行代码的一块内存区域。这部分区域的大小在程序运行前就已经确定，并且内存区域通常属于只读,
    某些架构也允许代码段为可写，即允许修改程序。在代码段中，也有可能包含一些只读的常数变量，例如字符串常量等。
-   数据段： 储存已被初始化了的静态数据。数据段（data segment
    ）通常是指用来存放程序中已初始化的全局变量的一块内存区域。数据段属于静态内存分配。
-   BSS 段：未初始化的数据段. BSS 段（bss segment
    ）通常是指用来存放程序中未初始化的全局变量的一块内存区域。BSS
    是英文Block Started by Symbol 的简称。BSS 段属于静态内存分配。
-   堆（heap ）：
    堆是用于存放进程运行中被动态分配的内存段，它的大小并不固定，可动态扩张或缩减。当进程调用malloc
    等函数分配内存时，新分配的内存就被动态添加到堆上（堆被扩张）；当利用free
    等函数释放内存时，被释放的内存从堆中被剔除（堆被缩减）
-   栈(stack)
    ：栈又称堆栈，是用户存放程序临时创建的局部变量，也就是说我们函数括弧"{}
    "中定义的变量（但不包括static 声明的变量，static
    意味着在数据段中存放变量）。除此以外，在函数被调用时，其参数也会被压入发起调用的进程栈中，并且待到调用结束后，函数的返回值也会被存放回栈中。由于栈的先进先出特点，所以栈特别方便用来保存/
    恢复调用现场。从这个意义上讲，我们可以把堆栈看成一个寄存、交换临时数据的内存区。

另外, 在高地址还储存了命令行参数及环境变量.

因为内存程序映像中的各段可能位于不同的地址空间中,
它们不一定位于连续的内存块中. 操作系统将程序映像映射到地址空间时,
通常将内存程序映像划分为大小相同的块(也就是page, 页). 只有该页被引用时,
它才被加载到内存中. 不过对于程序员来说,
可以视内存程序映像在逻辑上是连续的.

    /opt/app/todeav1/colin/tests#size main
    text    data     bss     dec     hex filename
    1259     540      16    1815     717 main

关于程序内存映像，这篇文章讲的很好：http://blog.chinaunix.net/uid-9012903-id-2011435.html
